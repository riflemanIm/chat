"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,n,r,a=require("@mui/material"),o=require("react"),i=e(o),s=require("react-i18next"),l=e(require("@mui/icons-material/Star")),u=require("@mui/styles"),c=e(require("dayjs")),d=require("@mui/icons-material"),p=require("react-aspect-ratio"),f=e(require("@mui/icons-material/Delete")),g=e(require("@mui/icons-material/FileCopy")),m=e(require("@mui/icons-material/CallEnd")),h=e(require("@mui/icons-material/Group")),v=e(require("@mui/icons-material/Pause")),E=e(require("@mui/icons-material/PersonAdd")),y=e(require("@mui/icons-material/KeyboardArrowDown")),b=e(require("@mui/icons-material/PlayArrow")),C=e(require("@mui/icons-material/RestartAlt")),S=e(require("@mui/icons-material/VideoCall")),x=e(require("@mui/material/Button")),R=e(require("@mui/material/Menu")),T=e(require("@mui/material/MenuItem")),k=require("@mui/material/styles"),I=e(require("@mui/material/Dialog")),O=e(require("@mui/material/DialogActions")),N=e(require("@mui/material/DialogContent")),A=e(require("@mui/material/Slide")),w=e(require("react-infinite-scroll-hook")),L=e(require("@mui/material/List")),_=e(require("axios")),D=e(require("@mui/icons-material/RecentActors")),M=e(require("@mui/icons-material/Videocam")),P=e(require("@mui/icons-material/SettingsSuggest")),j=e(require("@mui/icons-material/SettingsVoice")),G=e(require("socket.io-client"));function U(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){U(o,r,a,i,s,"next",e)}function s(e){U(o,r,a,i,s,"throw",e)}i(void 0)}))}}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(a[n]=e[n]);return a}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return K(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e){return null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}function J(e,t){return void 0===t&&(t="DD.MM.YYYY HH:mm"),void 0===e?null:("string"==typeof e&&(e=new Date(e)),c().add(-1,"days").startOf("day").isAfter(e)?c(e).format(t):c().startOf("day").isAfter(e)?"–í—á–µ—Ä–∞ –≤ "+c(e).format("HH:mm"):c(e).format("HH:mm"))}(t=exports.MessageStatus||(exports.MessageStatus={}))[t.sent=0]="sent",t[t.read=1]="read",(n=exports.Role||(exports.Role={}))[n.Unknown=0]="Unknown",n[n.Client=1]="Client",n[n.Agent=2]="Agent",n[n.Specialist=3]="Specialist",n[n.Operator=4]="Operator",(r=exports.ContextMenuType||(exports.ContextMenuType={})).COPY="COPY",r.REVOKE="REVOKE",r.TOP_REVERT="TOP_REVERT",r.TOP="TOP",r.READ="READ",r.DELETE="DELETE";var W=function(e){return e?e.groupId?"group:"+e.groupId:"user:"+e.userId:null},$=function(e){return e.groupId?e.name:e.username},Q=function(e){return"groupId"in e},X=function(e,t){var n=Array.isArray(e.messages)&&e.messages.length>0,r=Array.isArray(t.messages)&&t.messages.length>0;return n&&r&&null!=t.messages&&null!=e.messages?(null!=t.messages[t.messages.length-1].cdate?new Date(t.messages[t.messages.length-1].cdate).getTime():(new Date).getTime())-(null!=e.messages[e.messages.length-1].cdate?new Date(e.messages[e.messages.length-1].cdate).getTime():(new Date).getTime()-1):n?-1:1},Z=function(e){var t=window.location.search;return new URLSearchParams(t).get(e)},ee=function(e,t,n){var r=t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e;return n?r+(r.includes("?")?"&":"?")+new URLSearchParams(n).toString():r},te=u.makeStyles((function(e){return u.createStyles({typingText:{paddingLeft:e.spacing(.5)},typingDot:{display:"inline-block",verticalAlign:"middle",width:4,height:4,margin:"0px 2px",background:e.palette.primary.main,borderRadius:"50%",opacity:"0",animation:"$loadingFade 1s infinite","&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}},"@keyframes loadingFade":{"0%":{opacity:0},"50%":{opacity:.8},"100%":{opacity:0}}})})),ne=function(e){var t=te();return i.createElement(a.Typography,{color:"primary",variant:"body2",component:"span"},i.createElement("span",{className:t.typingDot}),i.createElement("span",{className:t.typingDot}),i.createElement("span",{className:t.typingDot}),i.createElement("span",{className:t.typingText},e.message))},re=function(e){var t=s.useTranslation().t;return e.isTyping?i.createElement(ne,{message:t("CHAT.STATUS.TYPING")}):1===e.contact.online?i.createElement(a.Typography,{variant:"body2",color:"primary",component:"span"},t("CHAT.STATUS.ONLINE")):i.createElement(a.Typography,{variant:"body2",color:"textSecondary",component:"span"},t("CHAT.STATUS.OFFLINE"))},ae=["apiUrl","contacts","owner","onContactClick"],oe=u.makeStyles((function(){return{star:{fontSize:"0.85rem",verticalAlign:"middle"}}})),ie=function(e){var t=oe(),n=e.apiUrl,r=e.contacts,o=e.owner,s=e.onContactClick,u=B(e,ae);return i.createElement(a.List,H({},u,{"aria-label":"contacts"}),r.map((function(e){return i.createElement(a.ListItemButton,{key:e.userId,onClick:function(){return s&&s(e)}},i.createElement(a.ListItemAvatar,null,i.createElement(a.Avatar,{alt:e.username,src:e.avatar?ee(n,e.avatar):""})),i.createElement(a.ListItemText,{primary:i.createElement("span",null,e.username," ",o===e.userId&&i.createElement(l,{className:t.star,color:"primary"})),secondary:i.createElement(re,{contact:e,isTyping:!1})}))})))},se=function(e){var t=e.onClose,n=e.open,r=e.apiUrl,o=e.contacts,l=s.useTranslation();return i.createElement(a.Dialog,{onClose:function(){t()},"aria-labelledby":"add-contact-title",open:n},i.createElement(a.DialogTitle,{id:"switch-operator-title"},(0,l.t)("CHAT.ADD_CONTACT")),i.createElement(ie,{apiUrl:r,contacts:o,onContactClick:function(e){t(e)}}))},le=u.makeStyles((function(){return{root:{width:"100%",height:"100%",borderRadius:4}}})),ue=function(e){var t,n,r,a,s=e.conference,l=e.onClose,u=e.langCode,c=void 0===u?"en":u,d=le(),p=i.useRef(null),f=null!=s&&s.url&&c?(t=null==s?void 0:s.url,n="ru"===(a=c)?"rus":"fr"===a?"fra":"en"===a?"eng":"",r=new RegExp("(lang=)[^&]+"),t.replace(r,"$1"+n)):"";return o.useEffect((function(){var e=function(e){var t;e.source===(null==(t=p.current)?void 0:t.contentWindow)&&["notSupported","connectionFail","callFail","hangUp","remoteHangUp"].includes(e.data.type)&&l(s)};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[null==s?void 0:s.id,c]),i.createElement("iframe",{title:"conference",className:d.root,src:f,allowFullScreen:!0,allow:"microphone; camera; autoplay; display-capture",ref:p})},ce=u.makeStyles((function(){return{root:{width:"100%",height:"100%",borderRadius:8,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},pulse:{height:100,width:100,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",position:"relative","&::before":{content:"''",position:"absolute",border:"1px solid green",width:"calc(100% + 40px)",height:"calc(100% + 40px)",borderRadius:"50%",animation:"$pulse 1s linear infinite"},"&::after":{content:"''",position:"absolute",border:"1px solid green",width:"calc(100% + 40px)",height:"calc(100% + 40px)",borderRadius:"50%",animation:"$pulse 1s linear infinite",animationDelay:"0.3s"}},avatar:{width:"80%",height:"80%"},footer:{width:"100%",alignSelf:"flex-end",paddingTop:64,display:"flex",justifyContent:"center"},"@keyframes pulse":{"0%":{transform:"scale(0.5)",opacity:0},"50%":{transform:"scale(1)",opacity:1},"100%":{transform:"scale(1.3)",opacity:0}}}})),de=function(e){var t=e.conference,n=e.contact,r=e.apiUrl,o=e.onAccept,l=ce(),u=s.useTranslation().t;return i.createElement(a.Paper,{className:l.root},i.createElement("div",{className:l.pulse},i.createElement(a.Avatar,n?{className:l.avatar,alt:n.username,src:n.avatar?ee(r,n.avatar):""}:{className:l.avatar})),i.createElement("div",{className:l.footer},i.createElement(a.Button,{variant:"contained",color:"primary",onClick:function(){return o(t)}},u("CHAT.CONFERENCE.JOIN"))))},pe=u.makeStyles((function(){return u.createStyles({item:{cursor:"pointer"}})})),fe=function(e){var t=pe(),n=function(t){e.onSelect&&e.onSelect(t.target.innerText)},r=function(e){return o.createElement(a.Box,{m:.5,component:"span",onClick:n,className:t.item},e.emoji)};return o.createElement(a.Box,null,o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"üòÉ"}),o.createElement(r,{emoji:"üòÅ"}),o.createElement(r,{emoji:"üòÇ"}),o.createElement(r,{emoji:"üòÑ"}),o.createElement(r,{emoji:"üòÖ"}),o.createElement(r,{emoji:"üòÜ"}),o.createElement(r,{emoji:"üòá"}),o.createElement(r,{emoji:"üòà"}),o.createElement(r,{emoji:"üòâ"})),o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"üòä"}),o.createElement(r,{emoji:"üòã"}),o.createElement(r,{emoji:"üòå"}),o.createElement(r,{emoji:"üòç"}),o.createElement(r,{emoji:"üòé"}),o.createElement(r,{emoji:"üòè"}),o.createElement(r,{emoji:"üòê"}),o.createElement(r,{emoji:"üòí"}),o.createElement(r,{emoji:"üòì"})),o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"‚ùì"}),o.createElement(r,{emoji:"üòï"}),o.createElement(r,{emoji:"üòñ"}),o.createElement(r,{emoji:"üòó"}),o.createElement(r,{emoji:"üòò"}),o.createElement(r,{emoji:"üòô"}),o.createElement(r,{emoji:"üòö"}),o.createElement(r,{emoji:"üòú"}),o.createElement(r,{emoji:"üòù"})),o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"üòû"}),o.createElement(r,{emoji:"üòü"}),o.createElement(r,{emoji:"üò†"}),o.createElement(r,{emoji:"üò°"}),o.createElement(r,{emoji:"üò¢"}),o.createElement(r,{emoji:"üò£"}),o.createElement(r,{emoji:"üò§"}),o.createElement(r,{emoji:"üò•"}),o.createElement(r,{emoji:"üò¶"})),o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"üò®"}),o.createElement(r,{emoji:"üò©"}),o.createElement(r,{emoji:"üò™"}),o.createElement(r,{emoji:"üò´"}),o.createElement(r,{emoji:"üò¨"}),o.createElement(r,{emoji:"üò≠"}),o.createElement(r,{emoji:"üòÆ"}),o.createElement(r,{emoji:"üòØ"}),o.createElement(r,{emoji:"üò∞"})),o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"üò≤"}),o.createElement(r,{emoji:"üò≥"}),o.createElement(r,{emoji:"üò¥"}),o.createElement(r,{emoji:"üòµ"}),o.createElement(r,{emoji:"üßê"}),o.createElement(r,{emoji:"üò∑"}),o.createElement(r,{emoji:"üôÅ"}),o.createElement(r,{emoji:"üôÇ"}),o.createElement(r,{emoji:"üôÉ"})),o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"ü§ê"}),o.createElement(r,{emoji:"ü§ë"}),o.createElement(r,{emoji:"ü§í"}),o.createElement(r,{emoji:"ü§ì"}),o.createElement(r,{emoji:"ü§î"}),o.createElement(r,{emoji:"ü§ï"}),o.createElement(r,{emoji:"ü§†"}),o.createElement(r,{emoji:"ü§°"}),o.createElement(r,{emoji:"ü§¢"})),o.createElement(a.Box,{display:"flex",flexDirection:"row"},o.createElement(r,{emoji:"ü§§"}),o.createElement(r,{emoji:"ü§•"}),o.createElement(r,{emoji:"ü§ß"}),o.createElement(r,{emoji:"ü§®"}),o.createElement(r,{emoji:"ü§©"}),o.createElement(r,{emoji:"ü§™"}),o.createElement(r,{emoji:"ü§´"}),o.createElement(r,{emoji:"ü§¨"}),o.createElement(r,{emoji:"ü§≠"})))},ge=u.makeStyles((function(e){return u.createStyles({fileIcon:{fontSize:"0.75rem"},fileBody:{paddingLeft:e.spacing(1.2)}})})),me=function(e){var t=e.message,n=ge(),r=function(e){var t=e.split("$");return{date:t[0],userId:t[1],size:t[2],name:t[3]}}(t.content),o=function(e){var t=e.lastIndexOf(".");return-1===t?{name:e,ext:""}:{name:e.slice(0,t),ext:e.slice(t+1)}}(r.name),s=o.name,l=o.ext;return i.createElement(a.Box,{display:"flex",flexDirection:"row"},i.createElement(a.Avatar,{className:n.fileIcon},l.toUpperCase()),i.createElement(a.Box,{display:"flex",flexDirection:"column",className:n.fileBody},s,i.createElement("span",null,l+" "+r.size)))},he=u.makeStyles((function(e){var t,n;return u.createStyles({img:(t={cursor:"pointer",borderRadius:e.spacing(1.2),maxWidth:284,maxHeight:190},t[e.breakpoints.down("sm")]={maxWidth:250,maxHeight:170},t),aspect:(n={maxWidth:284,height:190},n[e.breakpoints.down("sm")]={maxWidth:250,height:170},n)})})),ve=function(e){var t=e.apiUrl,n=e.message,r=e.setViewerData,a=he();return i.createElement(p.AspectRatio,{ratio:"3/4",className:a.aspect},i.createElement("img",{src:ee(t,"/static/image/"+n.content),onClick:function(){r({visible:!0,src:ee(t,"/static/image/"+n.content)})},className:a.img,alt:n.cdate}))},Ee=u.makeStyles((function(e){var t;return{mediaContent:(t={backgroundColor:e.palette.secondary.main,borderRadius:e.spacing(1.2),maxWidth:284,height:190},t[e.breakpoints.down("sm")]={maxWidth:250,height:170},t)}})),ye=function(e){var t=e.apiUrl,n=e.message,r=e.isConference,a=Ee(),o="";if(r){var s=JSON.parse(n.content);o=ee(t,"/static/conf/"+s.visitId+"/"+s.name)}else o=ee(t,"/static/file/"+n.content);return i.createElement("video",{src:o,className:a.mediaContent,controls:!0,muted:!0,preload:"none"},"–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ–≥ video.")},be=function(e){var t=e.apiUrl,n=e.message,r=e.setViewerData;switch(n.messageType){case"text":return i.createElement(i.Fragment,null,n.content);case"video":case"video_conference":return i.createElement(ye,{message:n,apiUrl:t,isConference:"video_conference"===n.messageType});case"image":return i.createElement(ve,{message:n,apiUrl:t,setViewerData:r});case"file":return i.createElement(me,{message:n})}return null},Ce=u.makeStyles((function(e){var t;return u.createStyles({rootContact:{padding:1,paddingLeft:e.spacing(2),"& span":{float:"right",color:e.palette.text.secondary,fontSize:"0.8rem"},"& $message":{backgroundColor:e.palette.grey[200],color:e.palette.text.primary,borderTopRightRadius:e.spacing(3),borderBottomRightRadius:e.spacing(3)},"& $firstMessage":{borderTopLeftRadius:e.spacing(3),marginTop:10},"& $lastMessage":{borderTopRightRadius:e.spacing(3),borderBottomLeftRadius:0,borderBottomRightRadius:e.spacing(3),marginBottom:10}},rootUser:{padding:1,paddingRight:e.spacing(2),justifyContent:"flex-end","& span":{float:"right",color:"#D9DEEC",fontSize:"0.8rem"},"& $message":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,borderTopLeftRadius:e.spacing(3),borderBottomLeftRadius:e.spacing(3)},"& $firstMessage":{borderTopRightRadius:e.spacing(3),marginTop:10},"& $lastMessage":{borderTopLeftRadius:e.spacing(3),borderBottomRightRadius:0,marginBottom:10}},rootNotify:{justifyContent:"center","& span":{float:"right",color:e.palette.text.secondary,fontSize:"0.8rem"},"& > *":{borderRadius:e.spacing(3),fontWeight:500}},message:(t={maxWidth:"65%"},t[e.breakpoints.down("md")]={maxWidth:"95%"},t[e.breakpoints.down("sm")]={maxWidth:"85%"},t.borderRadius=e.spacing(.6),t.padding=e.spacing(.9),t.paddingLeft=e.spacing(1.8),t.paddingRight=e.spacing(1.8),t),firstMessage:{},lastMessage:{},file:{display:"flex",flexDirection:"row",flexWrap:"wrap",cursor:"pointer"},header:{flex:"0 0 100%",overflow:"hidden",fontWeight:"bold"},body:{flex:"1 1 auto",wordBreak:"break-word",overflow:"hidden"},status:{paddingLeft:e.spacing(1),flex:"1 1 auto",alignSelf:"flex-end"},statusImage:{fontSize:"1rem",marginRight:e.spacing(.5),verticalAlign:"middle"}})})),Se=o.memo(o.forwardRef((function(e,t){var n=Ce(),r=s.useTranslation().t,o=e.apiUrl,l=e.message,u=e.owner,c=e.user,p=e.isGroupMessage,f=e.isUserFirst,g=e.isUserLast,m=e.setViewerData;if("notify"===l.messageType){var h="{"===l.content[0]?JSON.parse(l.content):l.content;return i.createElement(a.ListItem,{className:n.rootNotify,ref:t},i.createElement(a.Alert,{severity:"string"==typeof h?"info":h.severity},"string"==typeof h?h:h.message))}if(l.isRevoke)return i.createElement(a.ListItem,{className:n.rootNotify,ref:t},i.createElement(a.Typography,{variant:"body2",align:"center"},l.userId===c.userId?r("CHAT.MESSAGE.REVOKED.YOU"):l.revokeUserName+" "+r("CHAT.MESSAGE.REVOKED.CONTACT")));var v=c.userId===l.userId;return i.createElement(a.ListItem,{ref:t,className:"video_conference"===l.messageType?n.rootNotify:v?n.rootUser:n.rootContact},function(e,t,n,r,o,s,l){var u=t.messageType,c=r&&o?n.message+" "+n.firstMessage+" "+n.lastMessage:r?n.message+" "+n.firstMessage:o?n.message+" "+n.lastMessage:n.message;return"file"===u?i.createElement(a.Link,{className:c+" "+n.file,underline:"none",href:ee(e,"/static/file/"+t.content),target:"_blank",download:!0,onContextMenu:s},l):i.createElement(a.Box,{display:"flex",flexDirection:"image"===u||"video"===u||"video_conference"===u?"column":"row",flexWrap:"wrap",className:c,onContextMenu:s},l)}(o,l,n,f,g,e.onContextMenu,i.createElement(i.Fragment,null,!v&&p&&u&&f&&i.createElement("div",{className:n.header},u.username),i.createElement("div",{className:n.body},i.createElement(be,{message:l,apiUrl:o,setViewerData:m})),i.createElement("div",{className:n.status},i.createElement("span",null,v?i.createElement(0===l.status?d.Done:d.DoneAll,{className:n.statusImage}):null,J(l.cdate))))))})));Se.displayName="Message";var xe,Re=(function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=Object.create((t&&t.prototype instanceof d?t:d).prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=b(i,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function d(){}function p(){}function f(){}var g={};s(g,a,(function(){return this}));var m=Object.getPrototypeOf,h=m&&m(m(R([])));h&&h!==t&&n.call(h,a)&&(g=h);var v=f.prototype=d.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,s){var l=u(e[a],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=f,s(v,"constructor",f),s(f,"constructor",p),p.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},E(y.prototype),s(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(v),s(v,i,"Generator"),s(v,a,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(xe={exports:{}}),xe.exports),Te={image:["image/jpeg","image/png","image/gif","image/bmp"],video:["video/mp4","video/webm"],file:["application/pdf"]},ke=u.makeStyles((function(){return{input:{flex:"auto"},inputUpload:{display:"none"},attachmentIcon:{fill:"none",stroke:"currentColor"},error:{color:"red",fontSize:"0.75rem",marginTop:"4px"}}})),Ie=function(e){var t=e.chat,n=e.onTyping,r=e.onSendMessage,l=e.maxMessageLength,u=void 0===l?1e3:l,c=ke(),p=s.useTranslation().t,f=o.useRef(null),g=o.useState(null),m=g[0],h=g[1],v=o.useRef(null),E=o.useRef(""),y=o.useState(""),b=y[0],C=y[1],S=o.useState(!1),x=S[0],R=S[1],T=o.useState({chat:t,time:0}),k=T[0],I=T[1],O=function(){h(null)},N=o.useCallback((function(e){if(v.current){var t=E.current+e;E.current=t,v.current.value=t}O()}),[]),A=o.useCallback((function(e){E.current=e.target.value,t&&n&&(k.chat!==t||Date.now()-k.time>=500)&&(I({chat:t,time:Date.now()}),n(t))}),[t,n,k.chat]),w=o.useCallback((function(e){t&&r&&r(t,e)}),[t,r]),L=o.useCallback((function(){var e,t=E.current;(0===(e=t).trim().length?(C(p("CHAT.ERROR.EMPTY_MESSAGE")),0):e.length>u?(C(p("CHAT.ERROR.MESSAGE_TOO_LONG")),0):(C(""),1))&&(w({message:t,messageType:"text"}),v.current&&(v.current.value="",E.current=""),C(""))}),[w]),_=function(){var e=F(Re.mark((function e(t){var n,r,a,o,i;return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null==(n=t.target.files)?void 0:n[0]){e.next=3;break}return e.abrupt("return");case 3:if(!(r.size>10485760)){e.next=6;break}return C(p("CHAT.ERROR.FILE_TOO_LARGE")),e.abrupt("return");case 6:if(e.prev=6,R(!0),C(""),"image"!==(o=(null==(a=Object.entries(Te).find((function(e){return e[1].includes(r.type)})))?void 0:a[0])||"file")){e.next=17;break}return e.next=13,new Promise((function(e){var t=new Image,n=URL.createObjectURL(r);t.onload=function(){var r,a,o;URL.revokeObjectURL(n),e((o=(r={width:t.width,height:t.height}).height,((a=r.width)>335||o>335)&&(a>o?(o=o/a*335,a=335):(a=a/o*335,o=335)),{width:a,height:o}))},t.src=n}));case 13:w({message:r,width:(i=e.sent).width,height:i.height,messageType:o}),e.next=18;break;case 17:w({message:r,messageType:o,fileName:r.name,size:r.size});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),C(p("CHAT.ERROR.UPLOAD_FAILED"));case 23:return e.prev=23,R(!1),f.current&&(f.current.value=""),e.finish(23);case 27:case"end":return e.stop()}}),e,null,[[6,20,23,27]])})));return function(t){return e.apply(this,arguments)}}();return i.createElement(a.Box,{display:"flex",flexDirection:"column"},i.createElement(a.TextField,{className:c.input,placeholder:p("CHAT.INPUT_MESSAGE")||"",autoFocus:!0,variant:"standard",error:!!b,disabled:x,inputRef:v,slotProps:{input:{autoComplete:"off",inputProps:{maxLength:u},disableUnderline:!0,startAdornment:i.createElement(a.InputAdornment,{position:"start"},i.createElement("input",{ref:f,accept:Object.values(Te).flat().join(","),className:c.inputUpload,id:"icon-button-file",type:"file",onChange:_,disabled:x}),i.createElement("label",{htmlFor:"icon-button-file"},i.createElement(a.IconButton,{color:"primary","aria-label":"upload",component:"span",size:"small",disabled:x},x?i.createElement(a.CircularProgress,{size:24}):i.createElement(a.SvgIcon,{className:c.attachmentIcon},i.createElement("path",{d:"M16.768 13.5767L11.6961 18.6486C9.35886 20.9859 5.56937 20.9859 3.23208 18.6486V18.6486C0.894789 16.3114 0.894789 12.5219 3.23208 10.1846L10.4479 2.96872C12.0875 1.32914 14.7458 1.32914 16.3854 2.96873V2.96873C18.025 4.60831 18.025 7.26659 16.3854 8.90617L9.16515 16.1264C8.23032 17.0612 6.71466 17.0612 5.77982 16.1264V16.1264C4.84499 15.1916 4.84499 13.6759 5.77982 12.7411L10.8896 7.63131",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})))),i.createElement(a.IconButton,{"aria-describedby":Boolean(m)?"emoji-popover":void 0,onClick:function(e){h(e.currentTarget)},color:"primary",size:"small",disabled:x},i.createElement(d.InsertEmoticon,null))),endAdornment:i.createElement(a.IconButton,{edge:"end",color:"inherit",size:"small",onClick:L,disabled:x||!E.current.trim()},i.createElement(d.Send,null)),onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),L())}}},onChange:A}),b&&i.createElement("div",{className:c.error},b),i.createElement(a.Popover,{id:"emoji-popover",open:Boolean(m),anchorEl:m,onClose:O,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"left"}},i.createElement(fe,{onSelect:N})))},Oe=o.forwardRef((function(e,t){return o.createElement(A,H({direction:"up",ref:t},e))}));function Ne(e){var t=e.open,n=e.setOpen,r=e.contentText,i=e.callback,l=s.useTranslation().t,u=function(){n(!1)};return o.createElement(o.Fragment,null,o.createElement(I,{open:t,TransitionComponent:Oe,keepMounted:!0,onClose:u,"aria-describedby":"alert-dialog-slide-description"},o.createElement(N,null,o.createElement(a.Typography,{variant:"h6"},r)),o.createElement(O,null,o.createElement(x,{onClick:u,color:"primary"},l("CHAT.BUT_CLOSE")),o.createElement(x,{onClick:function(){n(!1),i()},color:"warning"},l("CHAT.BUT_CONFIRM")))))}var Ae=k.styled((function(e){return i.createElement(R,H({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))}))((function(e){var t=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:k.alpha(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function we(e){var t=s.useTranslation().t,n=i.useState(null),r=n[0],a=n[1],o=i.useState(null),l=o[0],u=o[1],c=i.useState(!1),d=c[0],p=c[1],f=Boolean(r),g=i.useMemo((function(){return e.visitData.filter((function(t){return t.contactId===e.chat.userId}))}),[e.visitData,e.chat]);return i.createElement("div",null,i.createElement(x,{id:"conference-button","aria-controls":f?"conference-menu":void 0,"aria-haspopup":"true","aria-expanded":f?"true":void 0,color:"primary",size:"small",variant:"contained",disableElevation:!0,onClick:function(e){a(e.currentTarget)},startIcon:i.createElement(S,null),endIcon:i.createElement(y,null),disabled:0===g.length},t("CHAT.CONFERENCE.START")),i.createElement(Ne,{open:d,setOpen:p,contentText:t("CHAT.CONFERENCE.CONFIRM_RECREATE_CONF"),callback:function(){l&&d&&e.onVideoCall(e.chat,l,!0)}}),i.createElement(Ae,{id:"conference-menu",MenuListProps:{"aria-labelledby":"conference-button"},anchorEl:r,open:f,onClose:function(){a(null)}},g.map((function(t){return i.createElement(T,{onClick:function(){return function(t){a(null),u(t.visitId),"finished"===t.conferenceStatus?p(!0):e.onVideoCall(e.chat,t.visitId)}(t)},key:t.visitId,value:t.visitId,disableRipple:!0},i.createElement("finished"===t.conferenceStatus?C:b,null),(n=t,r=new Date(n.visitDate),n.plExamName+" ("+J(r,"HH:mm")+" - "+J(new Date(r.getTime()+6e4*n.duration),"HH:mm")+")"));var n,r}))))}var Le=i.forwardRef((function(e,t){return i.createElement(a.Slide,H({direction:"up",ref:t},e))}));function _e(e){var t=e.children,n=e.open,r=e.setOpen,o=e.severity,l=void 0===o?"warning":o,u=s.useTranslation().t,c=function(){r(!1)};return i.createElement(a.Dialog,{open:n,TransitionComponent:Le,keepMounted:!0,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.createElement(a.DialogContent,null,i.createElement(a.Alert,{severity:l},"string"==typeof t?i.createElement(a.Typography,{variant:"body2"},t):t)),i.createElement(a.DialogActions,null,i.createElement(a.Button,{onClick:c,variant:"text"},u("CHAT.BUT_CLOSE"))))}var De=function(e){var t=e.modaleInfo,n=e.setModaleInfo,r=e.strTime,l=s.useTranslation().t;return o.useMemo((function(){return i.createElement(_e,{open:t,setOpen:n,severity:"info"},i.createElement(a.Typography,{variant:"body1",textAlign:"center"},l("CHAT.CONFERENCE.UntillTheEnd"),":"),i.createElement(a.Typography,{variant:"h6",textAlign:"center"},r))}),[t])},Me=function(e){var t=e.finishDate,n=s.useTranslation().t,r=o.useState(!1),l=r[0],u=r[1],c=Date.now(),d=new Date(t).getTime(),p=Math.round((d-c)/1e3),f=function(e){void 0===e&&(e=3e4);var t=o.useState(e),n=t[0],r=t[1],a=o.useRef(null);return o.useEffect((function(){return n>0&&(a.current=setInterval((function(){return r((function(e){return e-1}))}),1e3)),function(){a.current&&clearInterval(a.current)}}),[n]),{counter:n,handlerRefresh:function(){r(e)}}}(p).counter,g=function(e){var t=Math.floor(e/3600),n=t<10?"0"+t:t;e%=3600;var r=Math.floor(e/60),a=e%60;return{hours:t,minutes:r,seconds:a,strTime:n+":"+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)}}(p),m=g.minutes,h=g.seconds,v=g.strTime;return o.useEffect((function(){m&&3===m&&null!=h&&0===h&&u(!0)}),[f]),p<1?null:i.createElement(a.Box,{textAlign:"center"},i.createElement(a.Typography,{variant:"body2",component:"span"},n("CHAT.CONFERENCE.LEFT_TIME"),":"," "),i.createElement(a.Typography,{variant:"button",component:"span"},v),i.createElement(De,{modaleInfo:l,setModaleInfo:u,strTime:v}))},Pe=u.makeStyles((function(e){return u.createStyles({paper:{padding:e.spacing(1)},avatarGroup:{backgroundColor:"#28B7C6",color:"#fff"}})})),je=function(e,t){var n,r=[(null==(n=e.members)?void 0:n.length)+" "+t("CHAT.MEMBERS")],a=(e.members||[]).reduce((function(e,t){return t.online?e+1:e}),0);return a&&r.push(a+" "+t("CHAT.STATUS.ONLINE")),r.join(", ")},Ge=function(e){var t=e.apiUrl,n=e.user,r=e.chat,l=e.typing,u=e.conference,c=e.visitData,d=e.conferenceJoined,p=e.className,g=e.operators,y=e.onVideoCall,b=e.onVideoEnd,C=e.onConferencePause,S=e.onOperatorAdd,x=e.onLeaveGroup,R=e.onContactClick,T=Pe(),k=s.useTranslation().t,I=o.useState(null),O=I[0],N=I[1],A=o.useState(!1),w=A[0],L=A[1],_=i.useState(!1),D=_[0],M=_[1];if(!r)return i.createElement(a.CardHeader,{avatar:i.createElement(a.Avatar,null),title:"",subheader:"",className:p});var P,j=null,G=function(e){O||N(e.currentTarget),j&&(clearTimeout(j),j=null)},U=function(){N(null),j&&(clearTimeout(j),j=null)},F=function(){j||(j=setTimeout((function(){U()}),1e3))},H=r;if(H.groupId)return i.createElement(a.CardHeader,{avatar:i.createElement(a.Avatar,{alt:H.name,className:T.avatarGroup},i.createElement(h,null)),title:H.name,subheader:i.createElement(i.Fragment,null,i.createElement("span",{id:"mouse-over-span","aria-owns":O?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:G,onMouseLeave:F},je(H,k)),i.createElement(a.Popover,{id:"mouse-over-popover",classes:{paper:T.paper},sx:{pointerEvents:"none"},open:!!O,anchorEl:O,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:U,disableRestoreFocus:!0},i.createElement(ie,{apiUrl:t,contacts:H.members,onContactClick:R,owner:H.userId,onMouseEnter:G,onMouseLeave:F,sx:{pointerEvents:"all"}}))),className:p,action:i.createElement(i.Fragment,null,4===n.role&&i.createElement(i.Fragment,null,i.createElement(a.IconButton,{"aria-label":"add user",onClick:function(){L(!0)}},i.createElement(E,null)),i.createElement(se,{apiUrl:t,open:w,contacts:g,onClose:function(e){L(!1),S&&e&&r&&S(r,e)}})),4===n.role&&(null==(P=H.members)?void 0:P.find((function(e){return e.userId!==n.userId&&4===e.role})))&&x&&i.createElement(a.IconButton,{"aria-label":"leave group",onClick:function(){return x(H)}},i.createElement(f,null)))});var V=r,B=!(null==l||!l.contactId)&&(null==l?void 0:l.userId)===V.userId;return i.createElement(a.CardHeader,{avatar:i.createElement(a.Avatar,{alt:V.username,src:V.avatar?ee(t,V.avatar):""}),title:i.createElement(a.Typography,{variant:"h6",sx:function(e){var t;return(t={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.9rem"})[e.breakpoints.down("md")]={fontSize:"0.8rem"},t[e.breakpoints.down("sm")]={whiteSpace:"wrap",fontSize:"0.7rem"},t}},V.username),subheader:i.createElement(re,{contact:V,isTyping:B}),className:p,action:i.createElement(i.Fragment,null,1!==n.role&&d&&u&&!q(u)&&null!=C&&i.createElement(a.Button,{"aria-label":"cancel call",variant:"contained",color:"secondary",size:"small",startIcon:i.createElement(v,{color:"primary"}),onClick:function(){return C(u)}},k("CHAT.CONFERENCE.PAUSE")),u&&!q(u)&&null!=b&&null!=n.role&&[3,4].includes(n.role)&&i.createElement(i.Fragment,null,i.createElement(a.Button,{"aria-label":"cancel call",variant:"contained",color:"warning",size:"small",startIcon:i.createElement(m,{color:"inherit"}),onClick:function(){return M(!0)},style:{marginLeft:8}},k("CHAT.CONFERENCE.FINISH")),i.createElement(Ne,{open:D,setOpen:M,contentText:k("CHAT.CONFERENCE.CONFIRM_FINISH_CONF"),callback:function(){b(u)}})),q(u)&&null!=y&&n.role&&[3,4].includes(n.role)&&i.createElement(we,{visitData:c,chat:V,onVideoCall:y}),null!=(null==u?void 0:u.finishDate)&&i.createElement(Me,{finishDate:u.finishDate}))})},Ue=function(e){var t=e.date;return i.createElement(a.Box,{sx:{position:"relative",height:0,margin:"8px 0"}},i.createElement(a.Fade,{in:!!t,timeout:2e3},i.createElement(a.Alert,{severity:"warning",icon:!1,sx:function(){return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:150,mx:"auto",justifyContent:"center",zIndex:1e3}}},i.createElement(a.Typography,{variant:"h6",textAlign:"center"},t&&c(t).format("DD.MM.YYYY")))))},Fe=u.makeStyles((function(e){var t;return{arrowDown:(t={position:"absolute",left:"94.5%",bottom:105},t[e.breakpoints.down("md")]={left:"91.5%",bottom:95},t[e.breakpoints.down("sm")]={left:"84%",bottom:95},t)}})),He=function(e){var t=e.visible,n=e.unreadCount,r=e.onScrollDown,o=Fe();return t?i.createElement(a.Box,{className:o.arrowDown,textAlign:"center"},i.createElement(a.Fab,{color:"info","aria-label":"scroll-down",size:"medium",onClick:r},i.createElement(y,null)),n>0&&i.createElement(a.Fab,{color:"warning",size:"small",sx:{width:24,height:24,minHeight:24,position:"relative",top:-10,pointerEvents:"none"}},i.createElement(a.Typography,{variant:"body2",sx:function(e){return{color:e.palette.background.default}}},n))):null},Ve=u.makeStyles((function(e){var t;return{messageListOuter:{flex:1,overflowY:"auto",margin:0,padding:0,height:"100%",scrollbarWidth:"thin",scrollbarColor:e.palette.primary.light+" #fff"},messageList:{},img:(t={cursor:"pointer",borderRadius:e.spacing(1.2),maxWidth:"auto",maxHeight:"95%"},t[e.breakpoints.down("sm")]={maxWidth:"auto",maxHeight:"95%"},t)}})),Be=function(e){var t,n,r,s,l=e.apiUrl,u=e.user,c=e.users,d=e.chat,p=e.loading,f=e.pageSize,g=e.initialMenuState,m=e.onNeedMoreMessages,h=e.onMessageDelete,v=e.setMenuState,E=e.onEnterRoom,y=Ve(),b=i.useRef(null),C=i.useMemo((function(){return W(d)}),[d]),S=i.useState({visible:!1,src:""}),x=S[0],R=S[1],T=i.useState(""),k=T[0],I=T[1],O=(null==d||null==(t=d.messages)?void 0:t.map((function(e){return H({},e,{ref:i.createRef()})})))||[],N=i.useMemo((function(){return null==d||null==(null==d?void 0:d.noMoreData)||!d.noMoreData}),[null==d?void 0:d.noMoreData]),A=function(e){var t=e.chatId,n=e.messages,r=e.scrollableRootRef,a=e.pageSize,i=e.hasNextPage,s=e.chat,l=e.onEnterRoom,u=e.setIsVisible,c=o.useState(!1),d=c[0],p=c[1],f=o.useRef(),g=o.useRef(),m=(null==n?void 0:n.length)||0,h=m&&n[m-1],v=o.useCallback((function(){r.current&&(r.current.scrollTop=r.current.scrollHeight,l&&s&&l(s))}),[t,l]),E=o.useCallback((function(){var e,t,a=r.current;if(a){var o=a.scrollHeight-a.scrollTop;f.current=o,p(i&&o>900);for(var s=0;s<m;s++){var l,c=n[s];if(null==c||null==(l=c.ref)||!l.current)break;if(e=a,(t=c.ref.current.getBoundingClientRect()).top>=150&&t.bottom<=e.clientHeight){u(c.cdate);break}}}}),[n,t]);return o.useEffect((function(){var e,a;t&&r.current&&n.length&&(u(null!=(e=null==(a=n[m-1])?void 0:a.cdate)?e:""),v())}),[t]),o.useEffect((function(){var e,t=r.current,n=null!=(e=f.current)?e:0;t&&h&&s&&(g.current===m-a?t.scrollTop=t.scrollHeight-n:(h.userId!==s.userId||n<=900)&&v()),g.current=m}),[m,t]),{scrollDown:v,handleRootScroll:E,scrollDownButton:d,setScrollDownButton:p,unreadCount:n.filter((function(e){return 0===e.status})).length}}({chatId:C,messages:O,scrollableRootRef:b,pageSize:f,hasNextPage:N,chat:d,onEnterRoom:E,setIsVisible:I}),L=A.scrollDown,_=A.handleRootScroll,D=A.scrollDownButton,M=A.unreadCount,P=w({loading:p,hasNextPage:N,onLoadMore:function(){return d&&m(d)},disabled:!1}),j=P[0],G=P[1].rootRef,U=i.useCallback((function(e){G(e),b.current=e}),[G]);if(n=function(){I("")},r=k,s=o.useRef(),o.useEffect((function(){s.current=n}),[n]),o.useEffect((function(){if(r){var e=setInterval((function(){s.current()}),4700);return function(){return clearInterval(e)}}}),[r]),!C)return null;var F=i.useMemo((function(){return O.map((function(e,t){var n,r;return i.createElement(Se,{ref:e.ref,key:e._id||t,apiUrl:l,user:u,message:e,owner:c[e.userId],isGroupMessage:!(null==d||!d.groupId),isUserFirst:0===t||"notify"===O[t-1].messageType||O[t-1].userId!==O[t].userId,isUserLast:t===O.length-1||"notify"===(null==(n=O[t+1])?void 0:n.messageType)||(null==(r=O[t+1])?void 0:r.userId)!==O[t].userId,onContextMenu:function(t){return function(e,t){var n="text"===e.messageType,r=u.userId===e.userId&&!!h&&(new Date).getTime()-new Date(e.cdate).getTime()<=12e4;n||r?(t.preventDefault(),v({message:e,mouseX:t.clientX-2,mouseY:t.clientY-4,canCopy:n,canDelete:r})):v(g)}(e,t)},setViewerData:R})}))}),[(O||[]).filter((function(e){return e._id})).length,M,l,u,c,null==d?void 0:d.groupId,D,k]);return i.createElement(i.Fragment,null,i.createElement(Ue,{date:k}),i.createElement(a.CardContent,{className:y.messageListOuter,ref:U,onScroll:_},i.createElement(a.List,{className:y.messageList},N&&i.createElement(a.ListItem,{ref:j,sx:{justifyContent:"center"}},i.createElement(a.CircularProgress,null)),F),i.createElement(He,{visible:D,unreadCount:M,onScrollDown:L}),x.visible&&i.createElement(a.Backdrop,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:x.visible,onClick:function(){return R({visible:!1,src:""})}},i.createElement("img",{src:x.src,className:y.img,alt:""}))))},ze=u.makeStyles((function(e){return u.createStyles({root:{width:"100%",minWidth:360,height:"100%",display:"flex",flexDirection:"column"},roomHeader:{flex:1},flexAll:{flex:"1 1 auto"},flexEnd:{justifyContent:"flex-end"}})})),Ke={message:null,mouseX:null,mouseY:null,canCopy:!1,canDelete:!1},Ye=function(e){var t=e.apiUrl,n=e.user,r=e.users,l=e.chat,u=e.typing,c=e.conference,d=e.visitData,p=e.conferenceJoined,m=e.loading,h=e.pageSize,v=e.onEnterRoom,E=ze(),y=s.useTranslation().t,b=i.useState(Ke),C=b[0],S=b[1],x=o.useCallback((function(){var e=C.message;S(Ke),e&&navigator.clipboard.writeText(e.content)}),[C.message]),R=o.useCallback((function(){var t=C.message;S(Ke),e.onMessageDelete&&l&&t&&e.onMessageDelete(l,t)}),[C.message]);return i.createElement(a.Card,{elevation:1,className:E.root},i.createElement(a.Box,{display:"flex",flexDirection:"row"},i.createElement(Ge,{apiUrl:t,user:n,chat:l,typing:u,conference:c,visitData:d,conferenceJoined:p,operators:e.operators,className:E.roomHeader,onVideoCall:e.onVideoCall,onVideoEnd:e.onVideoEnd,onConferencePause:e.onConferencePause,onOperatorAdd:e.onOperatorAdd,onLeaveGroup:e.onLeaveGroup,onContactClick:e.onContactClick})),i.createElement(a.Divider,null),i.createElement(Be,{apiUrl:t,user:n,users:r,chat:l,loading:m,pageSize:h,initialMenuState:Ke,onNeedMoreMessages:e.onNeedMoreMessages,onMessageDelete:e.onMessageDelete,setMenuState:S,onEnterRoom:v}),i.createElement(a.Divider,null),i.createElement(a.CardContent,null,i.createElement(Ie,{chat:l,onTyping:e.onTyping,onSendMessage:e.onSendMessage})),i.createElement(a.Menu,{keepMounted:!0,open:null!==C.mouseY,onClose:function(){S(Ke)},anchorReference:"anchorPosition",anchorPosition:null!==C.mouseY&&null!==C.mouseX?{top:C.mouseY,left:C.mouseX}:void 0},i.createElement(a.MenuItem,{onClick:x,disabled:!C.canCopy},i.createElement("span",{className:E.flexAll},y("CHAT.MESSAGE.MENU.COPY")),i.createElement(a.ListItemIcon,{className:E.flexEnd},i.createElement(g,{fontSize:"small"}))),i.createElement(a.MenuItem,{onClick:R,disabled:!C.canDelete},i.createElement("span",{className:E.flexAll},y("CHAT.MESSAGE.MENU.DELETE")),i.createElement(a.ListItemIcon,{className:E.flexEnd},i.createElement(f,{fontSize:"small"})))))},qe={userId:0,username:"",password:"",avatar:"",langCode:""},Je={user:qe,token:"",refreshToken:"",activeRoom:null,chatOld:null,groupGather:{},userGather:{},contactGather:{},operators:[],initialContactId:null,conference:{data:null,joined:!1,ringPlayed:!1},typing:null,loading:!1,error:void 0,success:void 0,visitData:[]},We=function(e){return e.activeRoom?e.groupGather[e.activeRoom.groupId]||e.contactGather[e.activeRoom.userId]:null},$e=function(e){var t=e.initialContactId,n=null;if(t)n=e.contactGather[t];else if(e.activeRoom)n=We(e);else{var r=[].concat(Object.values(e.contactGather),Object.values(e.groupGather)).sort(X);r.length>0&&(n=r[0])}return n},Qe=function(e,t,n){var r=H({},e);e.contactGather[t]&&(r.contactGather[t]=H({},r.contactGather[t],{online:n}));for(var a=0,o=Object.values(e.groupGather);a<o.length;a++){var i=o[a];if(i.members){var s=i.members.find((function(e){return e.userId===t}));if(s){var l=i.members.indexOf(s);i.members[l]=H({},s,{online:n})}}}var u=r.operators.findIndex((function(e){return e.userId===t}));return-1!==u&&(r.operators[u]=H({},r.operators[u],{online:n})),r.activeRoom=We(r),r},Xe=function(e,t,n){var r=H({},e);return r.contactGather[t]&&(r.contactGather[t]=H({},r.contactGather[t],{unreadCount:n(r.contactGather[t].unreadCount)})),r.activeRoom=We(r),r},Ze=function(e,t,n){var r=H({},e);return r.groupGather[t]&&(r.groupGather[t]=H({},r.groupGather[t],{unreadCount:n(r.groupGather[t].unreadCount)})),r.activeRoom=We(r),r};function et(e,t){var n,r,a;switch(t.type){case"SET_GROUP_GATHER":return H({},e,{groupGather:H({},e.groupGather,(n={},n[t.payload.groupId]=t.payload,n))});case"SET_CONTACT_GATHER":return H({},e,{contactGather:H({},e.contactGather,(r={},r[t.payload.userId]=t.payload,r))});case"DEL_GROUP":return function(e,t){var n=H({},e),r=n.activeRoom===n.groupGather[t];return delete n.groupGather[t],r&&(n.activeRoom=$e(n)),n}(e,t.payload);case"DEL_GROUP_MEMBER":return function(e,t){var n,r=H({},e),a=r.groupGather[t.groupId];return a&&(a.members=null==(n=a.members)?void 0:n.filter((function(e){return e.userId!==t.userId}))),r}(e,t.payload);case"DEL_CONTACT":return function(e,t){var n=H({},e),r=n.activeRoom===n.contactGather[t];return delete n.contactGather[t],r&&(n.activeRoom=$e(n)),n}(e,t.payload.userId);case"SET_USER_GATHER":return H({},e,{userGather:H({},e.userGather,(a={},a[t.payload.userId]=t.payload,a))});case"UPDATE_ACTIVE_ROOM":return H({},e,{activeRoom:$e(e)});case"SET_ACTIVE_ROOM":return function(e,t){return H({},e,{chatOld:null!=e.activeRoom?H({},e.activeRoom):null,activeRoom:t.groupId?e.groupGather[t.groupId]:t.contactId?e.contactGather[t.contactId]:null})}(e,t.payload);case"USER_ONLINE":return Qe(e,t.payload,1);case"USER_OFFLINE":return Qe(e,t.payload,0);case"ADD_GROUP_MESSAGE":return function(e,t){var n=H({},e),r=t.groupId;n.groupGather[r]&&(n.groupGather[r].messages?n.groupGather[r].messages=[].concat(n.groupGather[r].messages,[t]):n.groupGather[r]=H({},e.groupGather[r],{messages:[t]}));var a=n.activeRoom;return a&&a.groupId!==r&&t.userId!==e.user.userId?Ze(n,r,(function(e){return(e||0)+1})):(n.activeRoom=We(n),n)}(e,t.payload);case"ADD_PRIVATE_MESSAGE":return function(e,t){var n,r=H({},e),a=t.contactId===e.user.userId?t.userId:t.contactId;return r.contactGather[a].messages?r.contactGather[a].messages=[].concat(r.contactGather[a].messages,[t]):r.contactGather[a]=H({},r.contactGather[a],{messages:[t]}),(null==(n=r.activeRoom)?void 0:n.userId)!==a&&t.userId!==e.user.userId?Xe(r,a,(function(e){return(e||0)+1})):(r.activeRoom=We(r),r)}(e,t.payload);case"ADD_GROUP_UNREAD_GATHER":return Ze(e,t.payload,(function(e){return(e||0)+1}));case"ADD_CONTACT_UNREAD_GATHER":return Xe(e,t.payload,(function(e){return(e||0)+1}));case"SET_TYPING":return H({},e,{typing:t.payload});case"LOSE_GROUP_UNREAD_GATHER":return Ze(e,t.payload,(function(){return 0}));case"LOSE_CONTACT_UNREAD_GATHER":return Xe(e,t.payload,(function(){return 0}));case"REVOKE_MESSAGE":return function(e,t){var n=e.user.userId,r=H({},e),a=t.username||r.userGather[t.userId].username;if(t.groupId){var o=r.groupGather[t.groupId].messages;if(o){var i=o.find((function(e){return e._id===t._id}));if(i){var s=o.indexOf(i);o[s]=H({},i,{isRevoke:!0,revokeUserName:a})}}}else{var l=r.contactGather[t.contactId===n?t.userId:t.contactId].messages;if(l){var u=l.find((function(e){return e._id===t._id}));if(u){var c=l.indexOf(u);l[c]=H({},u,{isRevoke:!0,revokeUserName:a})}}}return r.activeRoom=We(r),r}(e,t.payload);case"UPDATE_GROUP_INFO":return function(e,t){var n=H({},e),r=t.groupId,a=n.groupGather[r];return a&&(n.groupGather[r]=H({},a,{name:t.name,notice:t.notice})),n.activeRoom=We(n),n}(e,t.payload);case"UPDATE_USER_INFO":return function(e,t){var n=H({},e),r=t.userId,a=t.username,o=t.avatar;return n.userGather[r]&&(n.userGather[r]=H({},n.userGather[r],{username:a,avatar:o})),n.contactGather[r]&&(n.contactGather[r]=H({},n.contactGather[r],{username:a,avatar:o})),n.activeRoom=We(n),n}(e,t.payload);case"ADD_GROUP_MEMBER":return function(e,t){var n=t.members.map((function(e){return H({},e,{isManager:0})})),r=H({},e);return r.groupGather[t.groupId].members&&n?r.groupGather[t.groupId].members=[].concat(e.groupGather[t.groupId].members,n):r.groupGather[t.groupId]=H({},r.groupGather[t.groupId],{members:n}),r.activeRoom=We(r),r}(e,t.payload);case"SET_CONFERENCE":return function(e,t){return H({},e,{conference:{data:H({},t),joined:(null==t?void 0:t.userId)===e.user.userId,ringPlayed:(null==t?void 0:t.userId)!==e.user.userId}})}(e,t.payload);case"JOIN_CONFERENCE":return H({},e,{conference:{data:H({},t.payload),joined:!0,ringPlayed:!1}});case"PAUSE_CONFERENCE":return function(e,t){var n;return(null==(n=e.conference.data)?void 0:n.id)!==(null==t?void 0:t.id)?e:H({},e,{conference:{data:H({},e.conference.data),joined:!1,ringPlayed:!1}})}(e,t.payload);case"STOP_CONFERENCE":return function(e,t){var n;return(null==(n=e.conference.data)?void 0:n.id)!==(null==t?void 0:t.id)?e:H({},e,{conference:{data:null,joined:!1,ringPlayed:!1}})}(e,t.payload);case"MARK_PRIVATE_MESSAGES_READ":return function(e,t){var n=H({},e);if(n.contactGather[t]){var r=H({},n.contactGather[t]);if(r.messages)for(var a=0;a<r.messages.length;a++)r.messages[a]=H({},r.messages[a],{status:1});n.contactGather[t]=r}if(n.activeRoom=We(n),null!=n.activeRoom&&n.activeRoom.messages)for(var o=0;o<n.activeRoom.messages.length;o++)n.activeRoom.messages[o]=H({},n.activeRoom.messages[o],{status:1});return n}(e,t.payload);case"ADD_PRIVATE_MESSAGES":return function(e,t){var n=H({},e),r=t.messages,a=t.contactId;return n.contactGather[a]&&(n.contactGather[a]=H({},n.contactGather[a],{messages:[].concat(r||[],n.contactGather[a].messages||[]),noMoreData:null==r||!r.length||(null==r?void 0:r.length)<t.pageSize})),n.activeRoom=We(n),n}(e,t.payload);case"ADD_GROUP_MESSAGES":return function(e,t){var n=H({},e),r=t.groupId,a=t.messages,o=t.userArr;n.groupGather[r]&&(n.groupGather[r]=H({},n.groupGather[r],{messages:[].concat(a||[],n.groupGather[r].messages||[]),noMoreData:null==a||!a.length||(null==a?void 0:a.length)<t.pageSize})),n.userGather=H({},n.userGather);for(var i,s=Y(o);!(i=s()).done;){var l=i.value;n.userGather[l.userId]||(n.userGather[l.userId]=l)}return n.activeRoom=We(n),n}(e,t.payload);case"SET_LOADING":return H({},e,{loading:t.payload,error:""});case"SET_ERROR":return H({},e,{error:t.payload,success:void 0});case"SET_SUCCES":return H({},e,{success:t.payload,error:void 0});case"SET_TOKEN":return function(e,t){return H({},e,{token:t})}(e,t.payload);case"SET_USER":return H({},e,{user:t.payload});case"CLEAR_USER":return function(e){return H({},e,{token:"",user:qe})}(e);case"CLEAR_CHAT_DATA":return H({},e,{activeRoom:null,groupGather:{},userGather:{},contactGather:{},conference:{data:null,joined:!1,ringPlayed:!1},typing:null});case"SET_OPERATORS":return H({},e,{operators:t.payload});case"SET_VISIT_DATA":return H({},e,{visitData:t.payload})}return e}var tt=i.createContext({state:Je,dispatch:function(){return null}}),nt=function(e){qe.langCode=e.defLang;var t=H({},Je,{token:e.token,refreshToken:e.token}),n=i.useReducer(et,t),r=n[0],a=n[1],s=o.useMemo((function(){return{state:r,dispatch:a}}),[r]);return i.createElement(tt.Provider,{value:s},e.children)},rt=o.createContext({});function at(e,t,n){return ot.apply(this,arguments)}function ot(){return(ot=F(Re.mark((function e(t,n,r){var a;return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),e.prev=2,e.next=5,_.post(r+"/auth/refreshToken",{authToken:t,refreshToken:n});case 5:a=e.sent.data,localStorage.setItem("authToken",null==a?void 0:a.authToken),localStorage.setItem("refreshToken",null==a?void 0:a.refreshToken),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("ERROR RefreshToken",e.t0);case 14:window.location.reload();case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var it=function(e){var t=e.chatBaseURLApi,n=e.pageSize,r=e.children,a=e.baseUrl,s=o.useContext(tt),l=s.state,u=s.dispatch,c=_.create({timeout:6e4,baseURL:t,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Authorization:"Bearer "+l.token},withCredentials:!1});c.interceptors.response.use((function(e){return e}),(function(e){return console.log("ERROR AxiosError"),function(e){l.token&&null!=e.response&&401===e.response.status&&at(l.token,l.refreshToken,a)}(e),Promise.reject(e)}));var d=o.useCallback(function(){var e=F(Re.mark((function e(t,r){var a,o,i,s;return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.userId,i=null==(a=t.messages)?void 0:a.length,e.prev=2,u({type:"SET_LOADING",payload:!0}),e.next=6,c.get("/contact/messages",{params:{contactId:o,current:i,pageSize:n}});case 6:(s=e.sent.data)&&(u({type:"ADD_PRIVATE_MESSAGES",payload:{pageSize:n,contactId:o,messages:s}}),r&&r()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),u({type:"SET_ERROR",payload:e.t0.message});case 15:return e.prev=15,u({type:"SET_LOADING",payload:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(t,n){return e.apply(this,arguments)}}(),[u]),p=o.useCallback(function(){var e=F(Re.mark((function e(t){var r,a,o,i;return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.groupId,o=null==(r=t.messages)?void 0:r.length,e.prev=2,u({type:"SET_LOADING",payload:!0}),e.next=6,c.get("/group/messages",{params:{groupId:a,current:o,pageSize:n}});case 6:(i=e.sent.data)&&u({type:"ADD_GROUP_MESSAGES",payload:H({pageSize:n,groupId:a},i)}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),u({type:"SET_ERROR",payload:e.t0.message});case 15:return e.prev=15,u({type:"SET_LOADING",payload:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[u]),f=function(){var e=F(Re.mark((function e(t,n){var r;return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("/contact/find",{params:{mmkId:t,guid:n}});case 3:if(null==(r=e.sent.data)){e.next=7;break}return e.abrupt("return",r);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("err getUserByMmk",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),g=o.useMemo((function(){return{apiUrl:t,pageSize:n,fetch:c,getPrivateMessages:d,getGroupMessages:p,getUserByMmk:f}}),[t,n]);return i.createElement(rt.Provider,{value:g},r)},st=u.makeStyles((function(e){return u.createStyles({main:{flex:"1 1 auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},time:{paddingLeft:e.spacing(1),justifyContent:"flex-end",whiteSpace:"nowrap"},unread:{justifyContent:"flex-end",maxHeight:20},avatarGroup:{backgroundColor:"#28B7C6",color:"#fff"}})})),lt=u.withStyles((function(e){return u.createStyles({badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px "+e.palette.background.paper,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}})}))(a.Badge),ut=u.withStyles((function(e){return u.createStyles({badge:{backgroundColor:e.palette.primary.main,boxShadow:"0 0 0 2px "+e.palette.background.paper}})}))(a.Badge),ct=function(e){var t=st(),n=s.useTranslation().t,r=e.apiUrl,o=e.chat,l=e.typing,u=$(o),c=o.groupId?i.createElement(a.Avatar,{alt:u,className:t.avatarGroup},i.createElement(h,null)," "):function(e,t,n){var r=i.createElement(a.Avatar,{alt:t.username,src:t.avatar?ee(e,t.avatar):""});return null!=n&&n.contactId&&(null==n?void 0:n.userId)===t.userId?i.createElement(lt,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r):null!=t&&t.online?i.createElement(ut,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r):r}(r,o,l),d=o.messages&&o.messages.length>0?o.messages[o.messages.length-1]:null,p=function(e,t){if(!e)return null;switch(e.messageType){case"text":return e.content;case"image":return"["+t("CHAT.MESSAGE.TYPE.IMAGE")+"]";case"video":return"["+t("CHAT.MESSAGE.TYPE.VIDEO")+"]";case"file":return"["+t("CHAT.MESSAGE.TYPE.FILE")+"]";case"notify":return"["+t("CHAT.MESSAGE.TYPE.NOTIFY")+"]";default:return null}}(d,n),f=null==d?void 0:d.cdate;return i.createElement(a.ListItemButton,{selected:e.active,onClick:e.onClick},i.createElement(a.ListItemAvatar,null,c),i.createElement(a.ListItemText,{secondaryTypographyProps:{component:"span"},primary:i.createElement(a.Box,{display:"flex",flexDirection:"row"},i.createElement("span",{className:t.main},u),i.createElement("span",{className:t.time},J(f))),secondary:i.createElement(a.Box,{display:"flex",flexDirection:"row"},i.createElement("span",{className:t.main},p),o.unreadCount?i.createElement(a.Chip,{className:t.unread,component:"span",size:"small",color:"primary",label:o.unreadCount}):null)}))},dt=u.makeStyles((function(e){return{root:{width:"100%",height:"100%"},searchField:{width:"100%"},listStyle:{height:"89.5%",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:e.palette.primary.light+" #fff"}}})),pt=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return $(e).toLowerCase().includes(n)}))},ft=function(e){var t=e.user,n=e.activeRoom,r=e.groups,l=e.contacts,u=e.typing,c=e.onChangeChat;console.log(" -- RoomList -- ");var d=dt(),p=s.useTranslation().t,f=o.useContext(rt).apiUrl,g=o.useState(""),m=g[0],h=g[1],v=i.useMemo((function(){return function(e,t,n,r){return function(e,t,n){var r=[].concat(t,n);r=r.sort(X);var a=localStorage.getItem(e+"-topChatId");if(a){var o=r.find((function(e){return W(e)===a}));o&&(r=r.filter((function(e){return W(e)!==a})),o.isTop=!0,r.unshift(o))}return r}(e,pt(t,r),pt(n,r))}(t.userId,r,l,m)}),[t.userId,r,l,m]);return i.createElement(a.Card,{elevation:1,className:d.root},i.createElement(a.CardHeader,{title:i.createElement(a.TextField,{className:d.searchField,label:p("CHAT.INPUT_SEARCH_CONTACT"),variant:"outlined",size:"small",fullWidth:!0,onChange:function(e){h(e.target.value)},value:m})}),i.createElement(a.Divider,null),i.createElement(L,{"aria-label":"rooms",className:d.listStyle},v.map((function(e){return i.createElement(ct,{key:W(e),apiUrl:f,chat:e,active:e===n,typing:u,onClick:function(){return c(e)}})}))))},gt=function(){var e=i.useContext(tt),t=e.state,n=t.error,r=t.success,o=e.dispatch,s=function(){o({type:"SET_ERROR",payload:void 0}),o({type:"SET_SUCCES",payload:void 0})};return i.createElement(a.Snackbar,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!n||!!r,autoHideDuration:6e3,onClose:s},i.createElement(a.Alert,{onClose:s,severity:n?"error":"success"},n||r))},mt=u.makeStyles((function(e){var t;return{root:(t={height:"100%",overflow:"hidden",padding:0},t[e.breakpoints.up("lg")]={minWidth:1200},t)}})),ht=function(e){var t=e.children,n=mt();return i.createElement(a.Container,{maxWidth:!1,className:n.root},t)},vt=function(e){var t=e.conferenceActive,n=e.hideRooms,r=e.contactsList,o=e.chatRoom,s=e.activeRoom,l=e.user,u=e.onExitRoom,c=e.onChangeChat,d=e.chatOld;return e.isMobile?i.createElement(i.Fragment,null,t&&i.createElement(a.Box,{sx:{position:"absolute",overflow:"hidden",zIndex:1400,top:null!=l&&l.role&&[3,4].includes(l.role)?-56:-12,left:null!=l&&l.role&&[3,4].includes(l.role)?32:218}},i.createElement(a.Box,{display:"flex",flexDirection:"row",columnGap:3,my:3,sx:{position:"relative"}},i.createElement(a.IconButton,{"aria-label":"exit room",sx:{color:"#fff",background:"#000","&:hover":{background:"#eee",color:"#000",boxShadow:"none"}},onClick:function(){s&&u?u(s):d&&c&&(console.log("onChangeChat"),c(d))}},i.createElement(s?M:D,null)))),r,o):i.createElement(i.Fragment,null,i.createElement(a.Grid2,{container:!0,spacing:1,sx:{height:"100%"}},(t||!n)&&i.createElement(a.Grid2,{size:s?{sm:t?6:4,lg:t?6:4,xl:t?6:3}:12,sx:{height:"100%"}},r),s&&i.createElement(a.Grid2,{size:{sm:t?6:n?12:8,lg:t?6:n?12:8,xl:t?6:n?12:9},sx:{height:"100%"}},o)))},Et=function(e){var t=e.audio,n=e.video,r=s.useTranslation().t,o=a.useMediaQuery((function(e){return e.breakpoints.down("md")})),l=i.useContext(tt).dispatch,u=function(){navigator.mediaDevices.getUserMedia({audio:t,video:n}).then((function(e){console.log("permissions",e),l({type:"SET_SUCCES",payload:r("CHAT.CONFERENCE.ALLOK")})})).catch((function(e){var t=r("CHAT.CONFERENCE.ErrorAny");"NotFoundError"===e.name&&(t=r("CHAT.CONFERENCE.NotFoundError")),"NotAllowedError"===e.name&&(t=r("CHAT.CONFERENCE.NotAllowedError")),l({type:"SET_ERROR",payload:t}),console.log("err",e.name+" : "+e.message)}))},c=r(t&&n?"CHAT.CONFERENCE.CheckCamMic":t?"CHAT.CONFERENCE.CheckMic":"CHAT.CONFERENCE.CheckCam");return o?i.createElement(a.Tooltip,{title:c},i.createElement(a.IconButton,{sx:{color:"#fff",background:"#000","&:hover":{background:"#eee",color:"#000",boxShadow:"none"}},"aria-label":"check",onClick:function(){return u()},size:"large"},i.createElement(t&&n?P:t?j:M,null))):i.createElement(a.Button,{"aria-label":"cancel call",variant:"contained",sx:{color:"#fff",background:"#000","&:hover":{background:"#eee",color:"#000",boxShadow:"none"}},size:"small",startIcon:i.createElement(t&&n?P:t?j:M,null),onClick:function(){return u()}},c)},yt=function(e){var t=e.user;return o.createElement(a.Box,{sx:function(e){var n;return(n={position:"absolute",overflow:"hidden",top:null!=t&&t.role&&[3,4].includes(t.role)?50:110,left:null!=t&&t.role&&[3,4].includes(t.role)?50:30,zIndex:1e3})[e.breakpoints.down("sm")]={top:98,left:26},n}},o.createElement(a.Box,{display:"flex",flexDirection:"row",columnGap:3,my:3,sx:{position:"relative"}},o.createElement(Et,{audio:!0,video:!1}),o.createElement(Et,{audio:!1,video:!0})))},bt=function(e){var t=e.conference,n=e.onAccept,r=e.isMobile,a=e.user,i=e.activeRoom,s=e.apiUrl;return t.data?t.joined?o.createElement(o.Fragment,null,o.createElement(ue,{conference:t.data,onClose:e.onClose,langCode:a.langCode}),(!i&&r||!r)&&o.createElement(yt,{user:a})):o.createElement(de,{apiUrl:s,contact:a.userId===t.data.userId?t.data.contactId:t.data.userId,conference:t.data,onAccept:n}):null},Ct=o.createContext({online:!1}),St=function(e){var t,n,r=e.wsUrl,a=e.wsPath,s=e.baseUrl,l=e.children,u=o.useContext(tt),c=u.state,d=u.dispatch,p=function(e,t,n){var r=o.useState(null),a=r[0],i=r[1],s=o.useCallback((function(){var r=G(e,{path:t,reconnection:!0,extraHeaders:{Authorization:"Bearer "+n}});i(r)}),[e,t,n]),l=o.useCallback((function(){null==a||a.disconnect(),i(null)}),[a]),u=o.useState(!1),c=u[0],d=u[1];return o.useEffect((function(){d(!(null==a||!a.connected))}),[a]),o.useEffect((function(){null==a||a.on("connect",(function(){d(!0),a.emit("chatData")}))}),[a]),o.useEffect((function(){null==a||a.on("disconnect",(function(){d(!1)}))}),[a]),{socket:a,online:c,disconnectSocket:l,connectSocket:s}}(r,a,c.token),f=p.socket,g=p.online,m=p.disconnectSocket,h=p.connectSocket;o.useEffect((function(){return c.token&&h(),c.token||m(),function(){m()}}),[c.token]);var v,E=function(e,t){return!!e.code&&(t({type:"SET_ERROR",payload:e.msg}),!0)};o.useEffect((function(){var e=function(e){console.log("unauthorized msg",e),at(c.token,c.refreshToken,s)};null==f||f.on("unauthorized",e);var t=function(e){if(!E(e,d)){var t=e.data,n=t.groupData,r=t.contactData,a=t.userData;if(d({type:"CLEAR_CHAT_DATA"}),d({type:"SET_USER",payload:t.user}),n.length)for(var o,i=Y(n);!(o=i()).done;){var s=o.value;null==f||f.emit("joinGroupSocket",{groupId:s.groupId}),d({type:"SET_GROUP_GATHER",payload:s})}if(r.length)for(var l,u=Y(r);!(l=u()).done;){var c=l.value;null==f||f.emit("joinPrivateSocket",{contactId:c.userId}),d({type:"SET_CONTACT_GATHER",payload:c})}if(d({type:"SET_OPERATORS",payload:t.operatorData}),a.length)for(var p,g=Y(a);!(p=g()).done;)d({type:"SET_USER_GATHER",payload:p.value});d({type:"UPDATE_ACTIVE_ROOM"}),d({type:"SET_CONFERENCE",payload:t.conferenceData}),d({type:"SET_VISIT_DATA",payload:t.visitData})}};null==f||f.on("chatData",t);var n=function(e){d({type:"USER_ONLINE",payload:e.data})};null==f||f.on("userOnline",n);var r=function(e){d({type:"USER_OFFLINE",payload:e.data})};null==f||f.on("userOffline",r);var a,o=function(e){E(e,d)||console.log("–£—Å–ø–µ—à–Ω–æ –≤–æ—à–µ–ª –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç")};null==f||f.on("joinPrivateSocket",o);var i=function(e){E(e,d)||(a&&clearTimeout(a),d({type:"SET_TYPING",payload:e.data}),a=setTimeout((function(){d({type:"SET_TYPING",payload:null})}),1e3))};null==f||f.on("typing",i);var l=function(e){E(e,d)||(d({type:"REVOKE_MESSAGE",payload:e.data}),console.log("REVOKE_MESSAGE"))};null==f||f.on("revokeMessage",l);var u=function(e){E(e,d)||d({type:"SET_GROUP_GATHER",payload:e.data})};null==f||f.on("addGroup",u);var p=function(e){if(!E(e,d)){var t=e.data;d({type:"SET_CONTACT_GATHER",payload:t}),d({type:"SET_USER_GATHER",payload:t}),null==f||f.emit("joinPrivateSocket",{contactId:t.userId})}};null==f||f.on("addContact",p);var g=function(e){E(e,d)||d({type:"DEL_CONTACT",payload:e.data})};null==f||f.on("deleteContact",g);var m=function(e){E(e,d)||d({type:"UPDATE_GROUP_INFO",payload:e.data})};null==f||f.on("updateGroupInfo",m);var h=function(e){E(e,d)||d({type:"UPDATE_USER_INFO",payload:e.data})};null==f||f.on("updateUserInfo",h);var v=function(e){E(e,d)||d({type:"SET_CONFERENCE",payload:e.data})};null==f||f.on("startConference",v);var y=function(e){E(e,d)||d({type:"PAUSE_CONFERENCE",payload:e.data})};null==f||f.on("pauseConference",y);var b=function(e){E(e,d)||d({type:"STOP_CONFERENCE",payload:e.data})};null==f||f.on("stopConference",b);var C=function(e){E(e,d)};null==f||f.on("addOperator",C);var S=function(e){E(e,d)||d({type:"SET_ACTIVE_ROOM",payload:e.data})};null==f||f.on("setActiveRoom",S);var x=function(e){E(e,d)||d({type:"SET_VISIT_DATA",payload:e.data.visitData})};return null==f||f.on("visitData",x),function(){null==f||f.off("unauthorized",e),null==f||f.off("chatData",t),null==f||f.off("userOnline",n),null==f||f.off("userOffline",r),null==f||f.off("joinPrivateSocket",o),a&&clearTimeout(a),null==f||f.off("typing",i),null==f||f.off("revokeMessage",l),null==f||f.off("addGroup",u),null==f||f.off("addContact",p),null==f||f.off("deleteContact",g),null==f||f.off("updateGroupInfo",m),null==f||f.off("updateUserInfo",h),null==f||f.off("startConference",v),null==f||f.off("pauseConference",y),null==f||f.off("stopConference",b),null==f||f.off("addOperator",C),null==f||f.off("setActiveRoom",S),null==f||f.off("visitData",x)}}),[null==f?void 0:f.id]),o.useEffect((function(){var e=function(){var e=F(Re.mark((function e(t){var n;return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E(t,d)){e.next=2;break}return e.abrupt("return");case 2:d({type:"ADD_GROUP_MESSAGE",payload:n=t.data}),n.userId!==c.user.userId&&(null==f||f.emit("markAsRead",{groupId:n.groupId,_id:n._id}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();null==f||f.on("groupMessage",e);var t=function(){var e=F(Re.mark((function e(t){var n,r;return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E(t,d)){e.next=2;break}return e.abrupt("return");case 2:(n=t.data).contactId!==c.user.userId&&n.userId!==c.user.userId||(d({type:"ADD_PRIVATE_MESSAGE",payload:n}),c.activeRoom&&(null==(r=c.activeRoom)?void 0:r.userId)===n.userId&&(null==f||f.emit("markAsRead",{contactId:n.userId,_id:n._id})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null==f||f.on("privateMessage",t),function(){null==f||f.off("groupMessage",e),null==f||f.off("privateMessage",t)}}),[null==f?void 0:f.id,null==(t=c.activeRoom)?void 0:t.userId,null==(n=c.activeRoom)?void 0:n.groupId]),o.useEffect((function(){var e=function(e){if(!E(e,d)){var t=e.data;t.userId===c.user.userId?d(t.groupId?{type:"LOSE_GROUP_UNREAD_GATHER",payload:t.groupId}:{type:"LOSE_CONTACT_UNREAD_GATHER",payload:t.contactId}):t.contactId&&d({type:"MARK_PRIVATE_MESSAGES_READ",payload:t.userId})}};null==f||f.on("markAsRead",e);var t=function(e){if(!E(e,d)){var t=e.data;d(t.userId===c.user.userId?{type:"DEL_GROUP",payload:t.groupId}:{type:"DEL_GROUP_MEMBER",payload:t})}};null==f||f.on("deleteGroup",t);var n=function(e){if(!E(e,d)){var t=e.data,n=t.group,r=t.user;c.groupGather[n.groupId]?r.userId!==c.user.userId&&d({type:"ADD_GROUP_MEMBER",payload:{groupId:n.groupId,members:[r]}}):(console.log("joined to a new group"),null==f||f.emit("chatData"))}};null==f||f.on("joinGroup",n);var r=function(e){var t;if(!E(e,d)){var n=e.data,r=n.user;r.online=1;var a,o=c.groupGather[n.group.groupId];!o||null!=(t=o.members)&&t.find((function(e){return e.userId===r.userId}))||(r.isManager=0,null==(a=o.members)||a.push(r)),d({type:"SET_USER_GATHER",payload:r})}};return null==f||f.on("joinGroupSocket",r),function(){null==f||f.off("markAsRead",e),null==f||f.off("deleteGroup",t),null==f||f.off("joinGroup",n),null==f||f.off("joinGroupSocket",r)}}),[null==f?void 0:f.id,c.user.userId,(v=c.groupGather,Object.values(v).map((function(e){return null!=(null==e?void 0:e.messages)?null==e?void 0:e.messages.length:0})).reduce((function(e,t){return e+t}),0))]);var y=o.useMemo((function(){return{socket:f,online:g}}),[f,g]);return i.createElement(Ct.Provider,{value:y},l)},xt=["activeGroupId","activeChatUserId","hideRooms","fullWidth"],Rt=function(e){var t,n,r=e.activeGroupId,i=e.activeChatUserId,s=e.hideRooms,l=void 0!==s&&s,u=B(e,xt),c=a.useMediaQuery((function(e){return e.breakpoints.down("md")})),d=o.useContext(tt),p=d.state,f=d.dispatch,g=o.useContext(Ct).socket,m=o.useContext(rt),h=m.apiUrl,v=m.pageSize,E=m.getPrivateMessages,y=m.getGroupMessages,b=m.getUserByMmk,C=o.useCallback((function(){f({type:"SET_ACTIVE_ROOM",payload:{}})}),[f]),S=o.useCallback((function(e,t){if(g)try{g.emit(e,t)}catch(t){console.error("Error emitting "+e+":",t),f({type:"SET_ERROR",payload:"Failed to send "+e})}else console.warn("Socket not connected, cannot emit "+e)}),[g,f]),x=o.useCallback(function(){var e=F(Re.mark((function e(t){return Re.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f({type:"SET_LOADING",payload:!0}),!Q(t)){e.next=7;break}return e.next=5,y(t);case 5:e.next=9;break;case 7:return e.next=9,E(t);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Failed to load messages:",e.t0),f({type:"SET_ERROR",payload:"Failed to load messages"});case 15:return e.prev=15,f({type:"SET_LOADING",payload:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[E,y,f]),R=o.useCallback((function(e,t){S("revokeMessage",{groupId:Q(e)?e.groupId:void 0,contactId:e.userId,_id:t._id})}),[S]),T=o.useCallback((function(e){S("typing",{groupId:Q(e)?e.groupId:void 0,contactId:e.userId})}),[S]),k=o.useCallback((function(e,t){var n={content:t.message,width:t.width,height:t.height,fileName:t.fileName,messageType:t.messageType,size:t.size};Q(e)?S("groupMessage",H({},n,{groupId:e.groupId})):S("privateMessage",H({},n,{contactId:e.userId}))}),[S]),I=o.useCallback((function(e){var t;if(null!=e&&null!=(t=e.messages)&&t.length&&g)try{var n=e.messages[e.messages.length-1];if(null==n||!n._id)return;Q(e)?g.emit("markAsRead",{groupId:e.groupId,_id:n._id}):(f({type:"MARK_PRIVATE_MESSAGES_READ",payload:e.userId}),g.emit("markAsRead",{contactId:e.userId,_id:n._id}))}catch(e){console.error("Error marking messages as read:",e),f({type:"SET_ERROR",payload:"Failed to mark messages as read"})}}),[g,f]),O=o.useCallback((function(e){if(e)try{f({type:"SET_ACTIVE_ROOM",payload:{groupId:Q(e)?e.groupId:void 0,contactId:null==e?void 0:e.userId}}),I(e)}catch(e){console.error("Error changing chat:",e),f({type:"SET_ERROR",payload:"Failed to change chat room"})}}),[f,I,g]),N=o.useCallback((function(e,t,n){S("startConference",{groupId:Q(e)?e.groupId:void 0,contactId:e.userId,visitId:t,recreate:n})}),[S]),A=o.useCallback((function(e){null!=e&&e.id&&S("stopConference",{id:e.id})}),[S]),w=o.useCallback((function(e){null!=e&&e.id&&S("pauseConference",{id:e.id})}),[S]),L=o.useCallback((function(e){null!=e&&e.id&&(S("resumeConference",{id:e.id}),f({type:"JOIN_CONFERENCE",payload:e}))}),[S,f]),_=o.useCallback((function(e,t){S("addOperator",{groupId:e.groupId,operatorId:t.userId})}),[S]),D=o.useCallback((function(e){S("deleteGroup",{groupId:e.groupId})}),[S]);o.useEffect((function(){var e=!0;return function(){var t=F(Re.mark((function t(){var n,a,o,s,l,u;return Re.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==r||q(p.groupGather)){t.next=5;break}if(q(n=Object.values(p.groupGather).find((function(e){return e.groupId===r})))||!e){t.next=5;break}return O(n),t.abrupt("return");case 5:if(null==i||q(p.contactGather)){t.next=10;break}if(!(a=Object.values(p.contactGather).find((function(e){return e.userId===i})))||!e){t.next=10;break}return O(a),t.abrupt("return");case 10:if(o=Z("mmk"),s=Z("guid"),null==o&&null==s||q(p.contactGather)){t.next=27;break}return t.prev=13,t.next=16,b(o,s);case 16:if(null==(l=t.sent)){t.next=22;break}if(!(u=Object.values(p.contactGather).find((function(e){return e.userId===l})))||!e){t.next=22;break}return O(u),t.abrupt("return");case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(13),console.error("Failed to get user by MMK:",t.t0);case 27:return t.abrupt("return",(function(){e=!1}));case 28:case"end":return t.stop()}}),t,null,[[13,24]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[p.user.userId]);var M=null!=p.activeRoom&&o.createElement(Ye,{apiUrl:h,user:p.user,users:p.userGather,operators:p.operators,chat:p.activeRoom,typing:p.typing,conference:p.conference.data,visitData:p.visitData,conferenceJoined:p.conference.joined,loading:p.loading,pageSize:v,onExitRoom:C,onEnterRoom:I,onNeedMoreMessages:x,onMessageDelete:R,onTyping:T,onSendMessage:k,onVideoCall:N,onVideoEnd:A,onConferencePause:w,onOperatorAdd:_,onLeaveGroup:D,onContactClick:u.onContactInfoClick,isMobile:c});return o.createElement(ht,null,o.createElement(vt,{isMobile:c,conferenceActive:!(null==(t=p.conference.data)||!t.id),hideRooms:l,contactsList:null!=(null==(n=p.conference.data)?void 0:n.id)&&null==r?o.createElement(bt,{conference:p.conference,onClose:w,onAccept:L,user:p.user,activeRoom:p.activeRoom,onChangeChat:O,apiUrl:h,isMobile:c}):o.createElement(ft,{user:p.user,activeRoom:p.activeRoom,groups:Object.values(p.groupGather),contacts:Object.values(p.contactGather),typing:p.typing,onChangeChat:O}),chatRoom:M,activeRoom:p.activeRoom,user:p.user,onExitRoom:C,onChangeChat:O,chatOld:p.chatOld}),o.createElement(gt,null))},Tt=function(e){return"string"==typeof e},kt=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},It=function(e){return null==e?"":""+e},Ot=function(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))},Nt=/###/g,At=function(e){return e&&e.indexOf("###")>-1?e.replace(Nt,"."):e},wt=function(e){return!e||Tt(e)},Lt=function(e,t,n){for(var r=Tt(t)?t.split("."):t,a=0;a<r.length-1;){if(wt(e))return{};var o=At(r[a]);!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{},++a}return wt(e)?{}:{obj:e,k:At(r[a])}},_t=function(e,t,n){var r=Lt(e,t,Object),a=r.obj,o=r.k;if(void 0===a&&1!==t.length){for(var i=t[t.length-1],s=t.slice(0,t.length-1),l=Lt(e,s,Object);void 0===l.obj&&s.length;)i=s[s.length-1]+"."+i,s=s.slice(0,s.length-1),(l=Lt(e,s,Object))&&l.obj&&void 0!==l.obj[l.k+"."+i]&&(l.obj=void 0);l.obj[l.k+"."+i]=n}else a[o]=n},Dt=function(e,t){var n=Lt(e,t),r=n.obj;if(r)return r[n.k]},Mt=function(e,t,n){var r=Dt(e,n);return void 0!==r?r:Dt(t,n)},Pt=function e(t,n,r){for(var a in n)"__proto__"!==a&&"constructor"!==a&&(a in t?Tt(t[a])||t[a]instanceof String||Tt(n[a])||n[a]instanceof String?r&&(t[a]=n[a]):e(t[a],n[a],r):t[a]=n[a]);return t},jt=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Ut=function(e){return Tt(e)?e.replace(/[&<>"'\/]/g,(function(e){return Gt[e]})):e},Ft=[" ",",","?","!",";"],Ht=new(function(){function e(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}return e.prototype.getRegExp=function(e){var t=this.regExpMap.get(e);if(void 0!==t)return t;var n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n},e}())(20),Vt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),a=e,o=0;o<r.length;){if(!a||"object"!=typeof a)return;for(var i=void 0,s="",l=o;l<r.length;++l)if(l!==o&&(s+=n),void 0!==(i=a[s+=r[l]])){if(["string","number","boolean"].indexOf(typeof i)>-1&&l<r.length-1)continue;o+=l-o+1;break}a=i}return a}},Bt=function(e){return e&&e.replace("_","-")},zt={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Kt=new(function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}var t=e.prototype;return t.init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||zt,this.options=t,this.debug=t.debug},t.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)},t.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)},t.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")},t.deprecate=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)},t.forward=function(e,t,n,r){return r&&!this.debug?null:(Tt(e[0])&&(e[0]=""+n+this.prefix+" "+e[0]),this.logger[t](e))},t.create=function(t){return new e(this.logger,H({},{prefix:this.prefix+":"+t+":"},this.options))},t.clone=function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)},e}()),Yt=function(){function e(){this.observers={}}var t=e.prototype;return t.on=function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]||(n.observers[e]=new Map);var r=n.observers[e].get(t)||0;n.observers[e].set(t,r+1)})),this},t.off=function(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])},t.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var a=Array.from(this.observers[e].entries());a.forEach((function(e){for(var t=e[0],r=e[1],a=0;a<r;a++)t.apply(void 0,n)}))}if(this.observers["*"]){var o=Array.from(this.observers["*"].entries());o.forEach((function(t){for(var r=t[0],a=t[1],o=0;o<a;o++)r.apply(r,[e].concat(n))}))}},e}(),qt=function(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(n=e.call(this)||this).data=t||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}V(t,e);var n=t.prototype;return n.addNamespaces=function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)},n.removeNamespaces=function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)},n.getResource=function(e,t,n){var r,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,s=void 0!==o.ignoreJSONStructure?o.ignoreJSONStructure:this.options.ignoreJSONStructure;if(e.indexOf(".")>-1)r=e.split(".");else if(r=[e,t],n)if(Array.isArray(n))(a=r).push.apply(a,n);else if(Tt(n)&&i){var l;(l=r).push.apply(l,n.split(i))}else r.push(n);var u=Dt(this.data,r);return!u&&!t&&!n&&e.indexOf(".")>-1&&(e=r[0],t=r[1],n=r.slice(2).join(".")),!u&&s&&Tt(n)?Vt(this.data&&this.data[e]&&this.data[e][t],n,i):u},n.addResource=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,i=[e,t];n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(i=e.split("."))[1]),this.addNamespaces(t),_t(this.data,i,r),a.silent||this.emit("added",e,t,n,r)},n.addResources=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var a in n)(Tt(n[a])||Array.isArray(n[a]))&&this.addResource(e,t,a,n[a],{silent:!0});r.silent||this.emit("added",e,t,n)},n.addResourceBundle=function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(i=e.split("."))[1]),this.addNamespaces(t);var s=Dt(this.data,i)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Pt(s,n,a):s=H({},s,n),_t(this.data,i,s),o.silent||this.emit("added",e,t,n)},n.removeResourceBundle=function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)},n.hasResourceBundle=function(e,t){return void 0!==this.getResource(e,t)},n.getResourceBundle=function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?H({},{},this.getResource(e,t)):this.getResource(e,t)},n.getDataByLanguage=function(e){return this.data[e]},n.hasLanguageSomeTranslations=function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))},n.toJSON=function(){return this.data},t}(Yt),Jt={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,a){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,a))})),t}},Wt={},$t=function(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=e.call(this)||this,Ot(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,z(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Kt.create("translator"),n}V(t,e);var n=t.prototype;return n.changeLanguage=function(e){e&&(this.language=e)},n.exists=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res},n.extractFromKey=function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,i=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=Ft.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===r.length)return!0;var a=Ht.getRegExp("("+r.map((function(e){return"?"===e?"\\?":e})).join("|")+")"),o=!a.test(e);if(!o){var i=e.indexOf(n);i>0&&!a.test(e.substring(0,i))&&(o=!0)}return o}(e,n,r));if(o&&!i){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:Tt(a)?[a]:a};var l=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(l[0])>-1)&&(a=l.shift()),e=l.join(r)}return{key:e,namespaces:Tt(a)?[a]:a}},n.translate=function(e,n,r){var a=this;if("object"!=typeof n&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof n&&(n=H({},n)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],n),l=s.key,u=s.namespaces,c=u[u.length-1],d=n.lng||this.language,p=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(p){var f=n.nsSeparator||this.options.nsSeparator;return o?{res:""+c+f+l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:""+c+f+l}return o?{res:l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:l}var g=this.resolve(e,n),m=g&&g.res,h=g&&g.usedKey||l,v=g&&g.exactUsedKey||l,E=Object.prototype.toString.apply(m),y=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,S=!Tt(m)&&"boolean"!=typeof m&&"number"!=typeof m;if(!(C&&m&&S&&y.indexOf(E)<0)||Tt(b)&&Array.isArray(m))if(C&&Tt(b)&&Array.isArray(m))(m=m.join(b))&&(m=this.extendTranslation(m,e,n,r));else{var x=!1,R=!1,T=void 0!==n.count&&!Tt(n.count),k=t.hasDefaultValue(n),I=T?this.pluralResolver.getSuffix(d,n.count,n):"",O=n.ordinal&&T?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",N=T&&!n.ordinal&&0===n.count&&this.pluralResolver.shouldUseIntlApi(),A=N&&n["defaultValue"+this.options.pluralSeparator+"zero"]||n["defaultValue"+I]||n["defaultValue"+O]||n.defaultValue;!this.isValidLookup(m)&&k&&(x=!0,m=A),this.isValidLookup(m)||(R=!0,m=l);var w=n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,L=w&&R?void 0:m,_=k&&A!==m&&this.options.updateMissing;if(R||x||_){if(this.logger.log(_?"updateKey":"missingKey",d,c,l,_?A:m),i){var D=this.resolve(l,H({},n,{keySeparator:!1}));D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var M=[],P=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&P&&P[0])for(var j=0;j<P.length;j++)M.push(P[j]);else"all"===this.options.saveMissingTo?M=this.languageUtils.toResolveHierarchy(n.lng||this.language):M.push(n.lng||this.language);var G=function(e,t,r){var o=k&&r!==m?r:L;a.options.missingKeyHandler?a.options.missingKeyHandler(e,c,t,o,_,n):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(e,c,t,o,_,n),a.emit("missingKey",e,c,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?M.forEach((function(e){var t=a.pluralResolver.getSuffixes(e,n);N&&n["defaultValue"+a.options.pluralSeparator+"zero"]&&t.indexOf(a.options.pluralSeparator+"zero")<0&&t.push(a.options.pluralSeparator+"zero"),t.forEach((function(t){G([e],l+t,n["defaultValue"+t]||A)}))})):G(M,l,A))}m=this.extendTranslation(m,e,n,g,r),R&&m===l&&this.options.appendNamespaceToMissingKey&&(m=c+":"+l),(R||x)&&this.options.parseMissingKeyHandler&&(m="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?c+":"+l:l,x?m:void 0):this.options.parseMissingKeyHandler(m))}else{if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,m,H({},n,{ns:u})):"key '"+l+" ("+this.language+")' returned an object instead of string.";return o?(g.res=U,g.usedParams=this.getUsedParamsDetails(n),g):U}if(i){var F=Array.isArray(m),V=F?[]:{},B=F?v:h;for(var z in m)if(Object.prototype.hasOwnProperty.call(m,z)){var K=""+B+i+z;V[z]=this.translate(K,H({},n,{joinArrays:!1,ns:u})),V[z]===K&&(V[z]=m[z])}m=V}}return o?(g.res=m,g.usedParams=this.getUsedParamsDetails(n),g):m},n.extendTranslation=function(e,t,n,r,a){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,H({},this.options.interpolation.defaultVariables,n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(H({},n,{interpolation:H({},this.options.interpolation,n.interpolation)}));var i,s=Tt(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var l=e.match(this.interpolator.nestingRegexp);i=l&&l.length}var u=n.replace&&!Tt(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=H({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,n.lng||this.language||r.usedLng,n),s){var c=e.match(this.interpolator.nestingRegexp);i<(c&&c.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return a&&a[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: "+r[0]+" in key: "+t[0]),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var d=n.postProcess||this.options.postProcess,p=Tt(d)?[d]:d;return null!=e&&p&&p.length&&!1!==n.applyPostProcessor&&(e=Jt.handle(p,e,t,this.options&&this.options.postProcessPassResolved?H({i18nResolved:H({},r,{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e},n.resolve=function(e){var t,n,r,a,o,i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Tt(e)&&(e=[e]),e.forEach((function(e){if(!i.isValidLookup(t)){var l=i.extractFromKey(e,s),u=l.key;n=u;var c=l.namespaces;i.options.fallbackNS&&(c=c.concat(i.options.fallbackNS));var d=void 0!==s.count&&!Tt(s.count),p=d&&!s.ordinal&&0===s.count&&i.pluralResolver.shouldUseIntlApi(),f=void 0!==s.context&&(Tt(s.context)||"number"==typeof s.context)&&""!==s.context,g=s.lngs?s.lngs:i.languageUtils.toResolveHierarchy(s.lng||i.language,s.fallbackLng);c.forEach((function(e){i.isValidLookup(t)||(o=e,!Wt[g[0]+"-"+e]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(o)&&(Wt[g[0]+"-"+e]=!0,i.logger.warn('key "'+n+'" for languages "'+g.join(", ")+'" won\'t get resolved as namespace "'+o+'" was not yet loaded',"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach((function(n){if(!i.isValidLookup(t)){a=n;var o,l=[u];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(l,u,n,e,s);else{var c;d&&(c=i.pluralResolver.getSuffix(n,s.count,s));var g=i.options.pluralSeparator+"zero",m=i.options.pluralSeparator+"ordinal"+i.options.pluralSeparator;if(d&&(l.push(u+c),s.ordinal&&0===c.indexOf(m)&&l.push(u+c.replace(m,i.options.pluralSeparator)),p&&l.push(u+g)),f){var h=""+u+i.options.contextSeparator+s.context;l.push(h),d&&(l.push(h+c),s.ordinal&&0===c.indexOf(m)&&l.push(h+c.replace(m,i.options.pluralSeparator)),p&&l.push(h+g))}}for(;o=l.pop();)i.isValidLookup(t)||(r=o,t=i.getResource(n,e,o,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:a,usedNS:o}},n.isValidLookup=function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)},n.getResource=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)},n.getUsedParamsDetails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Tt(e.replace),r=n?e.replace:e;if(n&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=H({},this.options.interpolation.defaultVariables,r)),!n){r=H({},r);for(var a,o=Y(t);!(a=o()).done;){var i=a.value;delete r[i]}}return r},t.hasDefaultValue=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,"defaultValue".length)&&void 0!==e[t])return!0;return!1},t}(Yt),Qt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Xt=function(){function e(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Kt.create("languageUtils")}var t=e.prototype;return t.getScriptPartFromCode=function(e){if(!(e=Bt(e))||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))},t.getLanguagePartFromCode=function(e){if(!(e=Bt(e))||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])},t.formatLanguageCode=function(e){if(Tt(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{var t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(e){}var n=["hans","hant","latn","cyrl","cans","mong","arab"],r=e.split("-");return this.options.lowerCaseLng?r=r.map((function(e){return e.toLowerCase()})):2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Qt(r[1].toLowerCase()))):3===r.length&&(r[0]=r[0].toLowerCase(),2===r[1].length&&(r[1]=r[1].toUpperCase()),"sgn"!==r[0]&&2===r[2].length&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Qt(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Qt(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e},t.isSupportedCode=function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1},t.getBestMatchFromCodes=function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){return e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null},t.getFallbackCodes=function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),Tt(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]},t.toResolveHierarchy=function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],o=function(e){e&&(n.isSupportedCode(e)?a.push(e):n.logger.warn("rejecting language code not found in supportedLngs: "+e))};return Tt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):Tt(e)&&o(this.formatLanguageCode(e)),r.forEach((function(e){a.indexOf(e)<0&&o(n.formatLanguageCode(e))})),a},e}(),Zt=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],en={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},tn=["v1","v2","v3"],nn=["v4"],rn={zero:0,one:1,two:2,few:3,many:4,other:5},an=function(){var e={};return Zt.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:en[t.fc]}}))})),e},on=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Kt.create("pluralResolver"),this.options.compatibilityJSON&&!nn.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=an(),this.pluralRulesCache={}}var t=e.prototype;return t.addRule=function(e,t){this.rules[e]=t},t.clearCache=function(){this.pluralRulesCache={}},t.getRule=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){var n,r=Bt("dev"===e?"en":e),a=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:a});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];try{n=new Intl.PluralRules(r,{type:a})}catch(r){if(!e.match(/-|_/))return;var i=this.languageUtils.getLanguagePartFromCode(e);n=this.getRule(i,t)}return this.pluralRulesCache[o]=n,n}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]},t.needsPlural=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1},t.getPluralFormsOfKey=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return""+t+e}))},t.getSuffixes=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return rn[e]-rn[t]})).map((function(e){return t.options.prepend+(n.ordinal?"ordinal"+t.options.prepend:"")+e})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]},t.getSuffix=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?this.options.prepend+(n.ordinal?"ordinal"+this.options.prepend:"")+r.select(t):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: "+e),"")},t.getSuffixRetroCompatible=function(e,t){var n=this,r=e.plurals(e.noAbs?t:Math.abs(t)),a=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var o=function(){return n.options.prepend&&a.toString()?n.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?"_plural_"+a.toString():o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()},t.shouldUseIntlApi=function(){return!tn.includes(this.options.compatibilityJSON)},e}(),sn=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=Mt(e,t,n);return!o&&a&&Tt(n)&&void 0===(o=Vt(e,n,r))&&(o=Vt(t,n,r)),o},ln=function(e){return e.replace(/\$/g,"$$$$")},un=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Kt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e},this.init(e)}var t=e.prototype;return t.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation,n=t.escape,r=t.escapeValue,a=t.useRawValueToEscape,o=t.prefix,i=t.prefixEscaped,s=t.suffix,l=t.suffixEscaped,u=t.formatSeparator,c=t.unescapeSuffix,d=t.unescapePrefix,p=t.nestingPrefix,f=t.nestingPrefixEscaped,g=t.nestingSuffix,m=t.nestingSuffixEscaped,h=t.nestingOptionsSeparator,v=t.maxReplaces,E=t.alwaysFormat;this.escape=void 0!==n?n:Ut,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==a&&a,this.prefix=o?jt(o):i||"{{",this.suffix=s?jt(s):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=p?jt(p):f||jt("$t("),this.nestingSuffix=g?jt(g):m||jt(")"),this.nestingOptionsSeparator=h||",",this.maxReplaces=v||1e3,this.alwaysFormat=void 0!==E&&E,this.resetRegExp()},t.reset=function(){this.options&&this.init(this.options)},t.resetRegExp=function(){var e=function(e,t){return e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g")};this.regexp=e(this.regexp,this.prefix+"(.+?)"+this.suffix),this.regexpUnescape=e(this.regexpUnescape,""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix),this.nestingRegexp=e(this.nestingRegexp,this.nestingPrefix+"(.+?)"+this.nestingSuffix)},t.interpolate=function(e,t,n,r){var a,o,i,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=function(e){if(e.indexOf(s.formatSeparator)<0){var a=sn(t,l,e,s.options.keySeparator,s.options.ignoreJSONStructure);return s.alwaysFormat?s.format(a,void 0,n,H({},r,t,{interpolationkey:e})):a}var o=e.split(s.formatSeparator),i=o.shift().trim(),u=o.join(s.formatSeparator).trim();return s.format(sn(t,l,i,s.options.keySeparator,s.options.ignoreJSONStructure),u,n,H({},r,t,{interpolationkey:i}))};this.resetRegExp();var c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return ln(e)}},{regex:this.regexp,safeValue:function(e){return ln(s.escapeValue?s.escape(e):e)}}].forEach((function(t){for(i=0;a=t.regex.exec(e);){var n=a[1].trim();if(void 0===(o=u(n)))if("function"==typeof c){var l=c(e,a,r);o=Tt(l)?l:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(d){o=a[0];continue}s.logger.warn("missed to pass in variable "+n+" for interpolating "+e),o=""}else Tt(o)||s.useRawValueToEscape||(o=It(o));var p=t.safeValue(o);if(e=e.replace(a[0],p),d?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,++i>=s.maxReplaces)break}})),e},t.nest=function(e,t){for(var n,r,a,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=function(e,t){var n=o.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp(n+"[ ]*{")),i="{"+r[1];e=r[0];var s=(i=o.interpolate(i,a)).match(/'/g),l=i.match(/"/g);(s&&s.length%2==0&&!l||l.length%2!=0)&&(i=i.replace(/'/g,'"'));try{a=JSON.parse(i),t&&(a=H({},t,a))}catch(t){return o.logger.warn("failed parsing options string in nesting for key "+e,t),""+e+n+i}return a.defaultValue&&a.defaultValue.indexOf(o.prefix)>-1&&delete a.defaultValue,e};n=this.nestingRegexp.exec(e);){var l=[];(a=(a=H({},i)).replace&&!Tt(a.replace)?a.replace:a).applyPostProcessor=!1,delete a.defaultValue;var u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),l=c,u=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&!Tt(r))return r;Tt(r)||(r=It(r)),r||(this.logger.warn("missed to resolve "+n[1]+" for nesting "+e),r=""),u&&(r=l.reduce((function(e,t){return o.format(e,t,i.lng,H({},i,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e},e}(),cn=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var a=r[1].substring(0,r[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach((function(e){if(e){var t=e.split(":"),r=t[0],a=t.slice(1).join(":").trim().replace(/^'+|'+$/g,""),o=r.trim();n[o]||(n[o]=a),"false"===a&&(n[o]=!1),"true"===a&&(n[o]=!0),isNaN(a)||(n[o]=parseInt(a,10))}}))}return{formatName:t,formatOptions:n}},dn=function(e){var t={};return function(n,r,a){var o,i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i=H({},i,((o={})[a.interpolationkey]=void 0,o)));var s=r+JSON.stringify(i),l=t[s];return l||(l=e(Bt(r),a),t[s]=l),l(n)}},pn=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Kt.create("formatter"),this.options=e,this.formats={number:dn((function(e,t){var n=new Intl.NumberFormat(e,H({},t));return function(e){return n.format(e)}})),currency:dn((function(e,t){var n=new Intl.NumberFormat(e,H({},t,{style:"currency"}));return function(e){return n.format(e)}})),datetime:dn((function(e,t){var n=new Intl.DateTimeFormat(e,H({},t));return function(e){return n.format(e)}})),relativetime:dn((function(e,t){var n=new Intl.RelativeTimeFormat(e,H({},t));return function(e){return n.format(e,t.range||"day")}})),list:dn((function(e,t){var n=new Intl.ListFormat(e,H({},t));return function(e){return n.format(e)}}))},this.init(e)}var t=e.prototype;return t.init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","},t.add=function(e,t){this.formats[e.toLowerCase().trim()]=t},t.addCached=function(e,t){this.formats[e.toLowerCase().trim()]=dn(t)},t.format=function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find((function(e){return e.indexOf(")")>-1}))){var i=o.findIndex((function(e){return e.indexOf(")")>-1}));o[0]=[o[0]].concat(o.splice(1,i)).join(this.formatSeparator)}var s=o.reduce((function(e,t){var o=cn(t),i=o.formatName,s=o.formatOptions;if(r.formats[i]){var l=e;try{var u=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{};l=r.formats[i](e,u.locale||u.lng||a.locale||a.lng||n,H({},s,a,u))}catch(e){r.logger.warn(e)}return l}return r.logger.warn("there was no format function for "+i),e}),e);return s},e}(),fn=function(e){function t(t,n,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(a=e.call(this)||this).backend=t,a.store=n,a.services=r,a.languageUtils=r.languageUtils,a.options=o,a.logger=Kt.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=o.maxParallelReads||10,a.readingCalls=0,a.maxRetries=o.maxRetries>=0?o.maxRetries:5,a.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,o.backend,o),a}V(t,e);var n=t.prototype;return n.queueLoad=function(e,t,n,r){var a=this,o={},i={},s={},l={};return e.forEach((function(e){var r=!0;t.forEach((function(t){var s=e+"|"+t;!n.reload&&a.store.hasResourceBundle(e,t)?a.state[s]=2:a.state[s]<0||(1===a.state[s]?void 0===i[s]&&(i[s]=!0):(a.state[s]=1,r=!1,void 0===i[s]&&(i[s]=!0),void 0===o[s]&&(o[s]=!0),void 0===l[t]&&(l[t]=!0)))})),r||(s[e]=!0)})),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}},n.loaded=function(e,t,n){var r=e.split("|"),a=r[0],o=r[1];t&&this.emit("failedLoading",a,o,t),!t&&n&&this.store.addResourceBundle(a,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);var i={};this.queue.forEach((function(n){var r,s,l,u;r=o,(l=(s=Lt(n.loaded,[a],Object)).obj)[u=s.k]=l[u]||[],l[u].push(r),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(e){i[e]||(i[e]={});var t=n.loaded[e];t.length&&t.forEach((function(t){void 0===i[e][t]&&(i[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",i),this.queue=this.queue.filter((function(e){return!e.done}))},n.read=function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:e,ns:t,fcName:n,tried:a,wait:o,callback:i});else{this.readingCalls++;var s=function(s,l){if(r.readingCalls--,r.waitingReads.length>0){var u=r.waitingReads.shift();r.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}s&&l&&a<r.maxRetries?setTimeout((function(){r.read.call(r,e,t,n,a+1,2*o,i)}),o):i(s,l)},l=this.backend[n].bind(this.backend);if(2!==l.length)return l(e,t,s);try{var u=l(e,t);u&&"function"==typeof u.then?u.then((function(e){return s(null,e)})).catch(s):s(null,u)}catch(e){s(e)}}},n.prepareLoading=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Tt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Tt(t)&&(t=[t]);var o=this.queueLoad(e,t,r,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))},n.load=function(e,t,n){this.prepareLoading(e,t,{},n)},n.reload=function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)},n.loadOne=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),a=r[0],o=r[1];this.read(a,o,"read",void 0,void 0,(function(r,i){r&&t.logger.warn(n+"loading namespace "+o+" for language "+a+" failed",r),!r&&i&&t.logger.log(n+"loaded namespace "+o+" for language "+a,i),t.loaded(e,r,i)}))},n.saveMissing=function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'+n+'" as the namespace "'+t+'" was not yet loaded',"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){var s=H({},o,{isUpdate:a}),l=this.backend.create.bind(this.backend);if(l.length<6)try{var u;(u=5===l.length?l(e,t,n,r,s):l(e,t,n,r))&&"function"==typeof u.then?u.then((function(e){return i(null,e)})).catch(i):i(null,u)}catch(e){i(e)}else l(e,t,n,r,i,s)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}},t}(Yt),gn=function(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"==typeof e[1]&&(t=e[1]),Tt(e[1])&&(t.defaultValue=e[1]),Tt(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}},mn=function(e){return Tt(e.ns)&&(e.ns=[e.ns]),Tt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Tt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e},hn=function(){},vn=function(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))},En=function(e){function t(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if((t=e.call(this)||this).options=mn(n),t.services={},t.logger=Kt,t.modules={external:[]},vn(z(t)),r&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,r),z(t)||z(t);setTimeout((function(){t.init(n,r)}),0)}return t}V(t,e);var n=t.prototype;return n.init=function(){var e=this,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof n&&(r=n,n={}),!n.defaultNS&&!1!==n.defaultNS&&n.ns&&(Tt(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));var a=gn();this.options=H({},a,this.options,mn(n)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=H({},a.interpolation,this.options.interpolation)),void 0!==n.keySeparator&&(this.options.userDefinedKeySeparator=n.keySeparator),void 0!==n.nsSeparator&&(this.options.userDefinedNsSeparator=n.nsSeparator);var o=function(e){return e?"function"==typeof e?new e:e:null};if(!this.options.isClone){var i;Kt.init(this.modules.logger?o(this.modules.logger):null,this.options),this.modules.formatter?i=this.modules.formatter:"undefined"!=typeof Intl&&(i=pn);var s=new Xt(this.options);this.store=new qt(this.options.resources,this.options);var l=this.services;l.logger=Kt,l.resourceStore=this.store,l.languageUtils=s,l.pluralResolver=new on(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!i||this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format||(l.formatter=o(i),l.formatter.init(l,this.options),this.options.interpolation.format=l.formatter.format.bind(l.formatter)),l.interpolator=new un(this.options),l.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},l.backendConnector=new fn(o(this.modules.backend),l.resourceStore,l,this.options),l.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(l.languageDetector=o(this.modules.languageDetector),l.languageDetector.init&&l.languageDetector.init(l,this.options.detection,this.options)),this.modules.i18nFormat&&(l.i18nFormat=o(this.modules.i18nFormat),l.i18nFormat.init&&l.i18nFormat.init(this)),this.translator=new $t(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,r||(r=hn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&"dev"!==u[0]&&(this.options.lng=u[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(n){e[n]=function(){var e;return(e=t.store)[n].apply(e,arguments)}}));var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach((function(n){e[n]=function(){var e;return(e=t.store)[n].apply(e,arguments),t}}));var p=kt(),f=function(){var t=function(t,n){e.isInitializing=!1,e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),p.resolve(n),r(t,n)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),p},n.loadResources=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn,r=n,a=Tt(e)?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(a&&"cimode"===a.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return r();var o=[],i=function(e){e&&"cimode"!==e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){"cimode"!==e&&o.indexOf(e)<0&&o.push(e)}))};if(a)i(a);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return i(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return i(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),r(e)}))}else r(null)},n.reloadResources=function(e,t,n){var r=kt();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=hn),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r},n.use=function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Jt.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this},n.setResolvedLanguage=function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}},n.changeLanguage=function(e,t){var n=this,r=this;this.isLanguageChangingTo=e;var a=kt();this.emit("languageChanging",e);var o=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},i=function(i){e||i||!n.services.languageDetector||(i=[]);var s=Tt(i)?i:n.services.languageUtils.getBestMatchFromCodes(i);s&&(n.language||o(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(e){!function(e,i){i?(o(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,a.resolve((function(){return r.t.apply(r,arguments)})),t&&t(e,(function(){return r.t.apply(r,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),a},n.getFixedT=function(e,t,n){var r=this,a=function e(t,a){var o;if("object"!=typeof a){for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];o=r.options.overloadTranslationOptionHandler([t,a].concat(s))}else o=H({},a);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,""!==o.keyPrefix&&(o.keyPrefix=o.keyPrefix||n||e.keyPrefix);var u,c=r.options.keySeparator||".";return u=o.keyPrefix&&Array.isArray(t)?t.map((function(e){return""+o.keyPrefix+c+e})):o.keyPrefix?""+o.keyPrefix+c+t:t,r.t(u,o)};return Tt(e)?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=n,a},n.t=function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)},n.exists=function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)},n.setDefaultNamespace=function(e){this.options.defaultNS=e},n.hasLoadedNamespace=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=n.lng||this.resolvedLanguage||this.languages[0],a=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var i=function(e,n){var r=t.services.backendConnector.state[e+"|"+n];return-1===r||0===r||2===r};if(n.precheck){var s=n.precheck(this,i);if(void 0!==s)return s}return!(!this.hasResourceBundle(r,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!i(r,e)||a&&!i(o,e)))},n.loadNamespaces=function(e,t){var n=this,r=kt();return this.options.ns?(Tt(e)&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())},n.loadLanguages=function(e,t){var n=this,r=kt();Tt(e)&&(e=[e]);var a=this.options.preload||[],o=e.filter((function(e){return a.indexOf(e)<0&&n.services.languageUtils.isSupportedCode(e)}));return o.length?(this.options.preload=a.concat(o),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())},n.dir=function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";var t=this.services&&this.services.languageUtils||new Xt(gn());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"},t.createInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)},n.cloneInstance=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn,a=n.forkResourceStore;a&&delete n.forkResourceStore;var o=H({},this.options,n,{isClone:!0}),i=new t(o);void 0===n.debug&&void 0===n.prefix||(i.logger=i.logger.clone(n));var s=["store","services","language"];return s.forEach((function(t){i[t]=e[t]})),i.services=H({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},a&&(i.store=new qt(this.store.data,o),i.services.resourceStore=i.store),i.translator=new $t(i.services,o),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(o,r),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i},n.toJSON=function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}},t}(Yt),yn=En.createInstance();yn.createInstance=En.createInstance,yn.addResourceBundle("ru","translations",{CHAT:{STATUS:{ONLINE:"–≤ —Å–µ—Ç–∏",OFFLINE:"–Ω–µ –≤ —Å–µ—Ç–∏",TYPING:"–ø–µ—á–∞—Ç–∞–µ—Ç"},MESSAGE:{TYPE:{IMAGE:"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",VIDEO:"–í–∏–¥–µ–æ",FILE:"–§–∞–π–ª",NOTIFY:"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"},MENU:{COPY:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",DELETE:"–£–¥–∞–ª–∏—Ç—å"},REVOKED:{YOU:"–í—ã —É–¥–∞–ª–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ",CONTACT:"—É–¥–∞–ª–∏–ª(–∞) —Å–æ–æ–±—â–µ–Ω–∏–µ"}},CONFERENCE:{JOIN:"–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è",START:"–ù–∞—á–∞—Ç—å",RESTART:"–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é",CONFIRM_RECREATE_CONF:"–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é?",CONFIRM_FINISH_CONF:"–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é?",PAUSE:"–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å",FINISH:"–ó–∞–≤–µ—Ä—à–∏—Ç—å",BACK:"–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ —á–∞—Ç",NotFoundError:"–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",NotAllowedError:"–í –¥–æ—Å—Ç—É–ø–µ  –æ—Ç–∫–∞–∑–∞–Ω–æ. –ß—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –∑–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞",ErrorAny:"–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ",ALLOK:"–í—Å–µ OK",CheckCamMic:"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –∏ –∫–∞–º–µ—Ä–µ",CheckMic:"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω",CheckCam:"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–º–µ—Ä—É",UntillTheEnd:"–î–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –æ—Å—Ç–∞–ª–æ—Å—å",LEFT_TIME:"–û—Å—Ç–∞–ª–æ—Å—å"},ADD_CONTACT:"–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç",INPUT_MESSAGE:"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",INPUT_SEARCH_CONTACT:"–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ",MEMBERS:"—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤",BUT_CLOSE:"–ó–∞–∫—Ä—ã—Ç—å",BUT_CONFIRM:"–î–∞"}}),yn.addResourceBundle("en","translations",{CHAT:{STATUS:{ONLINE:"online",OFFLINE:"offline",TYPING:"typing"},MESSAGE:{TYPE:{IMAGE:"Image",VIDEO:"Video",FILE:"File",NOTIFY:"Notification"},MENU:{COPY:"Copy",DELETE:"Delete"},REVOKED:{YOU:"You deleted the message",CONTACT:"deleted the message"}},CONFERENCE:{JOIN:"Join",START:"Start",RESTART:"Recreate the conference",CONFIRM_RECREATE_CONF:"Are you sure you want to re-create the conference?",CONFIRM_FINISH_CONF:"Are you sure you want to end the conference?",PAUSE:"Pause",FINISH:"Finish",BACK:"Back to chat",NotFoundError:"Requested device not found",NotAllowedError:"Permission denied. To allow access to the device, go to the browser settings",ErrorAny:"The device is not configured",ALLOK:"All OK",CheckCamMic:"Check access to microphone and camera",CheckMic:"Check access to microphone",CheckCam:"Check access to camera",UntillTheEnd:"There is still time until the end of the conference",LEFT_TIME:"Time left"},ADD_CONTACT:"Add contact",INPUT_MESSAGE:"Please write a message...",INPUT_SEARCH_CONTACT:"Surname Name",MEMBERS:"members",BUT_CLOSE:"Close",BUT_CONFIRM:"Yes"}}),yn.addResourceBundle("fr","translations",{CHAT:{STATUS:{ONLINE:"en ligne",OFFLINE:"hors ligne",TYPING:"imprime"},MESSAGE:{TYPE:{IMAGE:"Image",VIDEO:"Vid√©o",FILE:"File",NOTIFY:"Notification"},MENU:{COPY:"Copier",DELETE:"Supprimer"},REVOKED:{YOU:"Vous avez supprim√© le message",CONTACT:"message supprim√©"}},CONFERENCE:{JOIN:"Rejoindre",START:"D√©marrer",RESTART:"Recr√©er la conf√©rence",CONFIRM_RECREATE_CONF:"√™tes-vous s√ªr de vouloir recr√©er la conf√©rence?",CONFIRM_FINISH_CONF:"√™tes-vous s√ªr de vouloir terminer la conf√©rence?",PAUSE:"Pause",FINISH:"Terminer",BACK:"Retour au chat",NotFoundError:"P√©riph√©rique demand√© introuvable",NotAllowedError:"Autorisation refus√©e. Pour autoriser l'acc√®s √† l'appareil, acc√©dez aux param√®tres du navigateur",ErrorAny:"L'appareil n'est pas configur√©",ALLOK:"Tout va bien",CheckCamMic:"V√©rifier l'acc√®s au microphone et √† la cam√©ra",CheckMic:"V√©rifier l'acc√®s au microphone",CheckCam:"V√©rifier l'acc√®s √† la cam√©ra",UntillTheEnd:" Il est encore temps jusqu'√† la fin de la conf√©rence",LEFT_TIME:"temps restant:"},ADD_CONTACT:"Ajouter un contact",INPUT_MESSAGE:"Veuillez √©crire un message...",INPUT_SEARCH_CONTACT:"Surname Name",MEMBERS:"members",BUT_CLOSE:"Fermer",BUT_CONFIRM:"Oui"}});var bn=function(e,t){switch(t.type){case"SET_ENGLISH":return yn.changeLanguage("en"),{language:"en"};case"SET_FRENCH":return yn.changeLanguage("fr"),{language:"fr"};case"SET_RUSSIAN":return yn.changeLanguage("ru"),{language:"ru"};default:return e}},Cn=o.createContext({}),Sn=function(e){var t=e.children,n=o.useReducer(bn,{language:yn.language.substring(0,2)}),r=n[0],a=n[1],l=o.useMemo((function(){return{languageState:r,dispatchLanguage:a}}),[r]);return i.createElement(Cn.Provider,{value:l},i.createElement(s.I18nextProvider,{i18n:yn},t))},xn=["lang","chatBaseURLApi","baseUrl","chatWsUrl","chatWsPath","token","refreshToken"];exports.AddContact=se,exports.CHAT_ACTIONS={SET_ACTIVE_ROOM:"SET_ACTIVE_ROOM",SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",REVOKE_MESSAGE:"REVOKE_MESSAGE",MARK_PRIVATE_MESSAGES_READ:"MARK_PRIVATE_MESSAGES_READ"},exports.ChatContext=tt,exports.ChatIndex=function(e){var t=e.lang,n=e.chatBaseURLApi,r=e.baseUrl,a=e.chatWsUrl,o=e.chatWsPath,s=e.token,l=e.refreshToken,u=B(e,xn);return i.createElement(Sn,null,i.createElement(nt,{defLang:t,token:s,refreshToken:l},i.createElement(it,{chatBaseURLApi:n,pageSize:25,baseUrl:r},i.createElement(St,{wsUrl:a,wsPath:o,baseUrl:r},i.createElement(Rt,u)))))},exports.ChatPage=Rt,exports.ChatProvider=nt,exports.Conference=ue,exports.ConferenceCall=de,exports.Emoji=fe,exports.Message=Se,exports.RestContext=rt,exports.RestProvider=it,exports.Room=Ye,exports.RoomList=ft,exports.SocketContext=Ct,exports.SocketProvider=St,exports.Typing=ne,exports.clearLocalStorage=function(){localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("doctor"),localStorage.removeItem("chatUser")},exports.getRefreshToken=at;
//# sourceMappingURL=chat.cjs.production.min.js.map
